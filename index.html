<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Ø¬Ù„Ø³Ø© Ø­Ø¨ Ø§Ù„ÙŠÙˆÙ…</title>
  <style>
    :root {
      --bg-main: radial-gradient(circle at top left, #17132e 0, #050409 45%, #020108 100%);
      --card-bg: rgba(15, 12, 32, 0.96);
      --card-soft: rgba(255, 255, 255, 0.04);
      --text-main: #fdfbff;
      --text-muted: #b4b0c9;
      --accent: #ff9f4a;
      --accent-2: #ff4a8d;
      --border-subtle: rgba(255, 255, 255, 0.07);
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.4);
      --radius-lg: 22px;
      --radius-md: 16px;

      --menu-bg: rgba(18, 14, 40, 0.9);
      --menu-border: rgba(255, 255, 255, 0.12);
      --menu-text: #e4ddff;

      --list-bg: rgba(4, 3, 12, 0.9);
      --list-item-bg: rgba(255, 255, 255, 0.03);
      --list-item-border: rgba(255, 255, 255, 0.05);
    }

    :root[data-theme="light"] {
      --bg-main: radial-gradient(circle at top left, #fff7fb 0, #f7f3ff 40%, #ebe6ff 100%);
      --card-bg: #fef9ff;
      --card-soft: rgba(0, 0, 0, 0.02);
      --text-main: #241533;
      --text-muted: #6e5f8c;
      --border-subtle: rgba(0, 0, 0, 0.06);
      --shadow-soft: 0 12px 32px rgba(0, 0, 0, 0.12);

      --menu-bg: #f5ecff;
      --menu-border: rgba(82, 51, 135, 0.25);
      --menu-text: #3f295d;

      --list-bg: #f6f0ff;
      --list-item-bg: #ffffff;
      --list-item-border: rgba(63, 41, 93, 0.15);
    }

    :root[data-mode="love"] {
      --accent: #ff4a8d;
      --accent-2: #ffb84a;
    }
    :root[data-mode="engaged"] {
      --accent: #4ad2ff;
      --accent-2: #8b5bff;
    }
    :root[data-mode="married"] {
      --accent: #4aff9b;
      --accent-2: #ffd84a;
    }
    :root[data-mode="special"] {
      --accent: #ff7ee5;
      --accent-2: #7effff;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg-main);
      color: var(--text-main);
      direction: rtl;
    }

    .app-shell {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1.5rem 1.2rem 2.5rem;
    }

    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.2rem;
      margin-bottom: 1.4rem;
      flex-wrap: wrap;
    }

    .logo-block {
      display: flex;
      align-items: center;
      gap: 0.7rem;
    }

    .logo-dot {
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: radial-gradient(circle, #7cffc4, #38d996);
      box-shadow: 0 0 0 6px rgba(56, 217, 150, 0.24);
    }

    .logo-text-main {
      font-weight: 700;
      font-size: 1.05rem;
    }

    .logo-text-sub {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .top-bar-right {
      display: flex;
      flex: 1;
      gap: 0.6rem;
      justify-content: flex-end;
      flex-wrap: wrap;
    }

    .main-session-btn {
      flex: 1;
      min-width: 220px;
      border-radius: 999px;
      border: none;
      padding: 0.9rem 1.4rem;
      font-size: 0.95rem;
      font-weight: 600;
      color: #050409;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow-soft);
      background-size: 250% 250%;
      animation: gradientShift 8s ease infinite;
    }

    .main-session-btn span {
      position: relative;
      z-index: 2;
    }

    .main-session-meta {
      font-size: 0.78rem;
      color: #1d162f;
      opacity: 0.9;
      margin-top: 0.15rem;
    }

    .top-bar-small-buttons {
      display: flex;
      gap: 0.4rem;
      flex-wrap: wrap;
    }

    .theme-toggle-btn {
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.2);
      background: rgba(255,255,255,0.03);
      color: var(--text-main);
      font-size: 0.8rem;
      padding: 0.55rem 1rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      white-space: nowrap;
      transition: background 0.15s ease, transform 0.15s ease, border-color 0.15s ease;
    }

    [data-theme="light"] .theme-toggle-btn {
      border-color: rgba(59, 39, 99, 0.2);
      background: rgba(255,255,255,0.7);
    }

    .theme-toggle-btn:hover {
      background: rgba(255,255,255,0.09);
      border-color: rgba(255,255,255,0.35);
      transform: translateY(-1px);
    }

    .btn-icon {
      font-size: 0.9rem;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 350px) minmax(0, 1fr);
      gap: 1.3rem;
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border-subtle);
      padding: 1rem 1.1rem;
    }

    .card-header-title {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 0.3rem;
    }

    .card-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    /* Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø¬Ù„Ø³Ø© */
    .session-music {
      margin-bottom: 1rem;
    }

    .session-music .card-header-title {
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .session-music .card-header-title::before {
      content: "â™ª";
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: radial-gradient(circle, var(--accent-2), var(--accent));
      font-size: 0.78rem;
      color: #050409;
    }

    .music-dropzone {
      margin-top: 0.8rem;
      border-radius: 18px;
      border: 1px dashed rgba(255, 255, 255, 0.17);
      padding: 1rem 0.9rem;
      background: radial-gradient(circle at top left, rgba(255, 255, 255, 0.07), transparent 55%);
      transition: border-color 0.15s ease, background 0.15s ease, transform 0.15s ease;
      cursor: pointer;
    }

    [data-theme="light"] .music-dropzone {
      background: #f6ecff;
      border-color: rgba(76, 41, 114, 0.25);
    }

    .music-dropzone-inner {
      display: flex;
      align-items: center;
      gap: 0.9rem;
    }

    .music-dropzone-icon {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #fff;
      box-shadow: var(--shadow-soft);
      flex-shrink: 0;
    }

    .music-dropzone-text {
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }

    .music-drop-hint {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .music-dropzone.dragover {
      border-color: var(--accent);
      background: radial-gradient(circle at top left, rgba(255, 184, 108, 0.2), transparent 55%);
      transform: translateY(-1px);
    }

    .music-upload-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.55rem 1.4rem;
      border-radius: 999px;
      border: none;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: #fff;
      font-size: 0.86rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: var(--shadow-soft);
      transition: transform 0.15s ease, box-shadow 0.15s ease, opacity 0.15s ease;
    }

    .music-upload-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 35px rgba(0, 0, 0, 0.45);
      opacity: 0.96;
    }

    .music-upload-btn:active {
      transform: translateY(0);
      box-shadow: var(--shadow-soft);
      opacity: 0.9;
    }

    .music-meta {
      margin-top: 0.8rem;
      padding: 0.6rem 0.7rem;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.06);
      font-size: 0.82rem;
    }

    [data-theme="light"] .music-meta {
      background: #ffffff;
      border-color: rgba(82, 51, 135, 0.2);
    }

    .music-title-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
    }

    .music-title-label {
      color: var(--text-muted);
    }

    .music-title {
      color: var(--text-main);
      font-weight: 600;
    }

    .music-extra {
      margin-top: 0.2rem;
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    .music-controls {
      margin-top: 0.75rem;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }

    .music-main-controls {
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .music-icon-btn {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: rgba(255, 255, 255, 0.02);
      color: var(--text-main);
      font-size: 0.9rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: background 0.15s ease, transform 0.15s ease, border-color 0.15s ease, opacity 0.15s ease;
    }

    [data-theme="light"] .music-icon-btn {
      border-color: rgba(75, 49, 118, 0.3);
      background: rgba(255,255,255,0.8);
    }

    .music-icon-btn[disabled] {
      opacity: 0.4;
      cursor: default;
    }

    .music-icon-btn:not([disabled]):hover {
      background: rgba(255, 255, 255, 0.07);
      transform: translateY(-1px);
    }

    .music-icon-btn.active {
      border-color: var(--accent);
      background: rgba(255, 159, 74, 0.16);
    }

    .music-progress-wrapper {
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      gap: 0.4rem;
    }

    .music-time {
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    #music-progress {
      width: 100%;
      -webkit-appearance: none;
      appearance: none;
      height: 4px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.12);
      outline: none;
    }

    #music-progress::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 0 4px rgba(255, 159, 74, 0.28);
      cursor: pointer;
    }

    #music-progress::-moz-range-thumb {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: none;
      background: var(--accent);
      box-shadow: 0 0 0 4px rgba(255, 159, 74, 0.28);
      cursor: pointer;
    }

    .music-volume-wrapper {
      display: flex;
      align-items: center;
      gap: 0.45rem;
    }

    #music-volume {
      flex: 1;
      -webkit-appearance: none;
      appearance: none;
      height: 4px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.1);
      outline: none;
    }

    #music-volume::-webkit-slider-thumb,
    #music-volume::-moz-range-thumb {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      border: none;
      background: #ffffff;
      cursor: pointer;
    }

    .music-autoplay-toggle {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.85rem;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .music-autoplay-toggle input {
      display: none;
    }

    .toggle-slider {
      width: 34px;
      height: 18px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.16);
      position: relative;
      flex-shrink: 0;
      cursor: pointer;
      transition: background 0.15s ease;
    }

    .toggle-slider::before {
      content: "";
      position: absolute;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: #ffffff;
      top: 2px;
      right: 2px;
      transition: transform 0.15s ease;
    }

    .music-autoplay-toggle input:checked + .toggle-slider {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
    }

    .music-autoplay-toggle input:checked + .toggle-slider::before {
      transform: translateX(-16px);
    }

    .toggle-label {
      cursor: pointer;
    }

    /* LoveBoard */
    .loveboard {
      margin-bottom: 1rem;
    }

    .loveboard-grid {
      margin-top: 0.8rem;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.6rem;
    }

    .loveboard-btn {
      border-radius: var(--radius-md);
      background: var(--menu-bg);
      border: 1px solid var(--menu-border);
      padding: 0.55rem 0.6rem;
      font-size: 0.8rem;
      color: var(--menu-text);
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      transition: background 0.15s ease, transform 0.15s ease, border-color 0.15s ease;
    }

    .loveboard-btn span {
      max-width: 80%;
    }

    .loveboard-btn:hover {
      background: rgba(255, 255, 255, 0.06);
      border-color: var(--accent);
      transform: translateY(-1px);
    }

    [data-theme="light"] .loveboard-btn:hover {
      background: #fff3ff;
    }

    .loveboard-tag {
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    .loveboard-note {
      margin-top: 0.6rem;
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    /* Ø§Ù„Ø­Ø³Ø§Ø¨ */
    .account-card {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .account-main-line {
      margin-bottom: 0.55rem;
    }

    .account-highlight {
      color: var(--accent-2);
      font-weight: 600;
    }

    .account-note {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-bottom: 0.7rem;
    }

    .logout-btn {
      border-radius: 999px;
      padding: 0.5rem 1.1rem;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: rgba(255, 255, 255, 0.04);
      color: #ffb6c1;
      font-size: 0.82rem;
      cursor: pointer;
      transition: background 0.15s ease, transform 0.15s ease, border-color 0.15s.ease;
    }

    [data-theme="light"] .logout-btn {
      border-color: rgba(128, 76, 125, 0.35);
      background: #ffe6f0;
      color: #a33663;
    }

    .logout-btn:hover {
      background: rgba(255, 80, 120, 0.12);
      border-color: rgba(255, 80, 120, 0.4);
      transform: translateY(-1px);
    }

    /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø© */
    .session-settings-card {
      margin-bottom: 1rem;
    }

    .session-settings-top {
      display: flex;
      justify-content: space-between;
      gap: 0.6rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .session-info-line {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .relation-modes {
      display: inline-flex;
      gap: 0.4rem;
      border-radius: 999px;
      background: var(--menu-bg);
      padding: 0.2rem;
      border: 1px solid var(--menu-border);
    }

    .relation-mode-btn {
      border-radius: 999px;
      border: none;
      padding: 0.35rem 0.85rem;
      font-size: 0.78rem;
      cursor: pointer;
      background: transparent;
      color: var(--menu-text);
      transition: background 0.15s ease, color 0.15s ease;
    }

    .relation-mode-btn.active {
      background: rgba(255, 255, 255, 0.12);
      color: var(--text-main);
    }

    .session-settings-bottom {
      margin-top: 0.7rem;
      font-size: 0.76rem;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      gap: 0.6rem;
      flex-wrap: wrap;
    }

    .pill-muted {
      border-radius: 999px;
      border: 1px solid var(--menu-border);
      padding: 0.2rem 0.7rem;
      font-size: 0.75rem;
      background: var(--menu-bg);
      color: var(--menu-text);
    }

    /* Ù…Ø¤Ù‚Øª Ø§Ù„Ø¬Ù„Ø³Ø© */
    .session-timer-banner {
      margin-bottom: 0.6rem;
      border-radius: 999px;
      background: var(--menu-bg);
      border: 1px solid var(--menu-border);
      padding: 0.35rem 0.75rem;
      font-size: 0.78rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
      color: var(--menu-text);
    }

    /* Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¬Ù„Ø³Ø© */
    .questions-card {
      display: flex;
      flex-direction: column;
      gap: 0.7rem;
      min-height: 420px;
    }

    .questions-header {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
    }

    .questions-header-title {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .questions-header-badge {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .questions-toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
    }

    .search-wrapper {
      flex: 1;
      min-width: 190px;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.45rem 0.7rem;
      border-radius: 999px;
      background: var(--menu-bg);
      border: 1px solid var(--menu-border);
      color: var(--menu-text);
    }

    .search-wrapper input {
      border: none;
      background: transparent;
      color: var(--menu-text);
      font-size: 0.8rem;
      flex: 1;
    }

    .search-wrapper input::placeholder {
      color: rgba(180, 176, 201, 0.7);
    }

    [data-theme="light"] .search-wrapper input::placeholder {
      color: rgba(81, 55, 124, 0.6);
    }

    .search-wrapper input:focus {
      outline: none;
    }

    .mini-select {
      border-radius: 999px;
      border: 1px solid var(--menu-border);
      background: var(--menu-bg);
      color: var(--menu-text);
      font-size: 0.8rem;
      padding: 0.35rem 0.55rem;
      min-width: 140px;
    }

    .btn-soft {
      border-radius: 999px;
      border: none;
      padding: 0.45rem 0.85rem;
      font-size: 0.8rem;
      background: rgba(255, 255, 255, 0.05);
      color: var(--text-main);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      transition: background 0.15s ease, transform 0.15s ease;
      white-space: nowrap;
    }

    [data-theme="light"] .btn-soft {
      background: #f3ebff;
      color: #332149;
    }

    .btn-soft:hover {
      background: rgba(255, 255, 255, 0.11);
      transform: translateY(-1px);
    }

    [data-theme="light"] .btn-soft:hover {
      background: #e7d8ff;
    }

    .btn-primary-soft {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: #050409;
      box-shadow: var(--shadow-soft);
    }

    .btn-primary-soft:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 35px rgba(0, 0, 0, 0.45);
    }

    .questions-ai-hint {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .question-display-wrapper {
      margin-top: 0.6rem;
      margin-bottom: 0.4rem;
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 0.6rem;
      align-items: stretch;
    }

    .question-display {
      border-radius: 18px;
      background: var(--list-bg);
      border: 1px solid var(--border-subtle);
      padding: 1rem 1rem;
      min-height: 130px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .question-display-placeholder {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .question-display-text {
      font-size: 0.9rem;
      line-height: 1.7;
    }

    .question-display-copy-btn {
      align-self: center;
      height: fit-content;
    }

    .questions-list {
      margin-top: 0.2rem;
      background: var(--list-bg);
      border-radius: 16px;
      border: 1px solid var(--border-subtle);
      padding: 0.6rem 0.4rem;
      max-height: 360px;
      overflow: auto;
      scroll-behavior: smooth;
    }

    .question-item {
      border-radius: 12px;
      padding: 0.55rem 0.55rem;
      margin-bottom: 0.45rem;
      background: var(--list-item-bg);
      border: 1px solid var(--list-item-border);
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      font-size: 0.82rem;
      color: var(--text-main);
    }

    .question-item.highlight {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(255, 159, 74, 0.5);
      background: radial-gradient(circle at top right, rgba(255, 159, 74, 0.15), rgba(255, 255, 255, 0.02));
    }

    [data-theme="light"] .question-item.highlight {
      background: #fff3e8;
    }

    .question-top-row {
      display: flex;
      justify-content: space-between;
      gap: 0.4rem;
    }

    .question-text {
      flex: 1;
    }

    .question-meta-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.4rem;
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    .question-tag {
      border-radius: 999px;
      padding: 0.15rem 0.55rem;
      border: 1px solid rgba(255, 255, 255, 0.16);
    }

    [data-theme="light"] .question-tag {
      border-color: rgba(79, 53, 118, 0.25);
      background: #f7ecff;
    }

    .question-mode-label {
      font-size: 0.75rem;
      color: rgba(180, 176, 201, 0.9);
    }

    [data-theme="light"] .question-mode-label {
      color: rgba(81, 55, 124, 0.8);
    }

    .question-actions {
      display: flex;
      gap: 0.3rem;
      flex-wrap: wrap;
    }

    .badge-counter {
      border-radius: 999px;
      border: 1px solid var(--menu-border);
      padding: 0.2rem 0.6rem;
      font-size: 0.75rem;
      color: var(--menu-text);
      margin-top: 0.2rem;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      background: var(--menu-bg);
    }

    /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.15s ease;
    }

    .modal-backdrop.open {
      opacity: 1;
      pointer-events: auto;
    }

    .modal {
      background: #120e23;
      border-radius: 18px;
      padding: 1.1rem 1.1rem 1rem;
      border: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow: var(--shadow-soft);
      max-width: 420px;
      width: 100%;
      max-height: calc(100vh - 48px);
      overflow: auto;
      transform: translateY(8px);
      transition: transform 0.17s ease;
      color: var(--text-main);
    }

    [data-theme="light"] .modal {
      background: #fdf7ff;
      border-color: rgba(89, 57, 133, 0.25);
      color: #26153a;
    }

    .modal-backdrop.open .modal {
      transform: translateY(0);
    }

    .modal-title {
      font-size: 0.98rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
    }

    .modal-body {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 0.9rem;
    }

    .modal-body-note {
      margin-top: 0.5rem;
      font-size: 0.74rem;
      color: var(--text-muted);
    }

    .modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 0.4rem;
    }

    .btn-sm {
      padding: 0.35rem 0.9rem;
      font-size: 0.78rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.03);
      color: var(--text-main);
      cursor: pointer;
      transition: background 0.15s ease, transform 0.15s ease;
      white-space: nowrap;
    }

    [data-theme="light"] .btn-sm {
      border-color: rgba(89, 57, 133, 0.3);
      background: #f4e7ff;
      color: #27163d;
    }

    .btn-sm:hover {
      background: rgba(255, 255, 255, 0.07);
      transform: translateY(-1px);
    }

    [data-theme="light"] .btn-sm:hover {
      background: #e7d5ff;
    }

    .btn-danger {
      border-color: rgba(255, 102, 140, 0.7);
      background: rgba(255, 102, 140, 0.14);
      color: #ffd7e5;
    }

    [data-theme="light"] .btn-danger {
      background: #ffe0ec;
      color: #9b234a;
      border-color: rgba(160, 56, 95, 0.7);
    }

    .short-messages-list {
      display: flex;
      flex-direction: column;
      gap: 0.45rem;
      margin-top: 0.4rem;
      margin-bottom: 0.6rem;
    }

    .short-message-item {
      border-radius: 12px;
      padding: 0.55rem 0.6rem;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      font-size: 0.82rem;
      color: var(--text-main);
    }

    [data-theme="light"] .short-message-item {
      background: #ffffff;
      border-color: rgba(90, 60, 135, 0.22);
      color: #2a163b;
    }

    .goals-list {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      margin-top: 0.4rem;
      max-height: 230px;
      overflow: auto;
    }

    .goal-item {
      border-radius: 12px;
      padding: 0.4rem 0.55rem;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      display: flex;
      align-items: center;
      gap: 0.45rem;
    }

    [data-theme="light"] .goal-item {
      background: #ffffff;
      border-color: rgba(90, 60, 135, 0.22);
    }

    .goal-label {
      font-size: 0.78rem;
      color: var(--text-muted);
      flex-shrink: 0;
      min-width: 52px;
    }

    .goal-item input {
      border: none;
      background: transparent;
      color: var(--text-main);
      font-size: 0.8rem;
      flex: 1;
    }

    [data-theme="light"] .goal-item input {
      color: #2a163b;
    }

    .goal-item input:focus {
      outline: none;
    }

    .memories-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, #161330 0, #050409 60%);
      display: none;
      z-index: 60;
      padding: 1rem;
    }

    [data-theme="light"] .memories-overlay {
      background: radial-gradient(circle at top, #fdf7ff 0, #ebe5ff 60%);
    }

    .memories-overlay.open {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .memories-panel {
      max-width: 720px;
      width: 100%;
      max-height: calc(100vh - 40px);
      background: rgba(10, 8, 25, 0.98);
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow: var(--shadow-soft);
      padding: 1.1rem 1.1rem 0.9rem;
      display: flex;
      flex-direction: column;
      color: var(--text-main);
    }

    [data-theme="light"] .memories-panel {
      background: #fdf7ff;
      border-color: rgba(93, 64, 140, 0.22);
      color: #26163b;
    }

    .memories-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 0.7rem;
    }

    .memories-title {
      font-size: 0.98rem;
      font-weight: 600;
    }

    .memories-subtitle {
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-top: 0.15rem;
    }

    .btn-back {
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: rgba(255, 255, 255, 0.04);
      color: var(--text-main);
      font-size: 0.8rem;
      padding: 0.35rem 0.9rem;
      cursor: pointer;
      transition: background 0.15s ease, transform 0.15s ease;
      white-space: nowrap;
    }

    [data-theme="light"] .btn-back {
      border-color: rgba(89, 59, 137, 0.3);
      background: #f4e7ff;
      color: #26143b;
    }

    .btn-back:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateY(-1px);
    }

    [data-theme="light"] .btn-back:hover {
      background: #e7d5ff;
    }

    .memories-list {
      flex: 1;
      overflow: auto;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
      margin-top: 0.2rem;
      padding-inline: 0.1rem;
    }

    .memory-item {
      border-radius: 14px;
      padding: 0.6rem 0.65rem;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    [data-theme="light"] .memory-item {
      background: #ffffff;
      border-color: rgba(91, 60, 140, 0.18);
    }

    .memory-label {
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-bottom: 0.3rem;
    }

    .memory-item textarea {
      width: 100%;
      min-height: 60px;
      border: none;
      resize: vertical;
      background: transparent;
      color: var(--text-main);
      font-size: 0.82rem;
      font-family: inherit;
    }

    [data-theme="light"] .memory-item textarea {
      color: #29163f;
    }

    .memory-item textarea:focus {
      outline: none;
    }

    .memories-footer {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.55rem;
      padding-top: 0.4rem;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
    }

    [data-theme="light"] .memories-footer {
      border-top-color: rgba(94, 65, 140, 0.24);
    }

    .theme-section-title {
      font-size: 0.8rem;
      color: var(--text-main);
      margin: 0.25rem 0 0.35rem;
      font-weight: 600;
    }

    .theme-presets-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.35rem;
      margin-bottom: 0.4rem;
    }

    .theme-preset {
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: rgba(255, 255, 255, 0.03);
      padding: 0.35rem 0.4rem;
      font-size: 0.74rem;
      color: var(--text-main);
      cursor: pointer;
      text-align: right;
      transition: background 0.15s ease, transform 0.15s ease, border-color 0.15s ease;
    }

    [data-theme="light"] .theme-preset {
      border-color: rgba(88, 59, 135, 0.3);
      background: #f5ebff;
      color: #2a193e;
    }

    .theme-preset:hover {
      background: rgba(255, 255, 255, 0.08);
      transform: translateY(-1px);
      border-color: rgba(255, 255, 255, 0.35);
    }

    [data-theme="light"] .theme-preset:hover {
      background: #e7d5ff;
      border-color: rgba(88, 59, 135, 0.6);
    }

    .theme-preset-main {
      font-weight: 600;
      font-size: 0.78rem;
    }

    .theme-preset-sub {
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    .theme-preset-preview {
      margin-top: 0.25rem;
      border-radius: 999px;
      height: 12px;
      background: linear-gradient(90deg, #ff9f4a, #ff4a8d);
    }

    .theme-custom-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
      margin-bottom: 0.4rem;
      font-size: 0.78rem;
    }

    .theme-custom-row input[type="color"] {
      width: 38px;
      height: 22px;
      border-radius: 6px;
      border: none;
      padding: 0;
      background: transparent;
    }

    .theme-select {
      width: 100%;
      margin-top: 0.4rem;
      border-radius: 10px;
      border: 1px solid var(--menu-border);
      background: var(--menu-bg);
      color: var(--menu-text);
      font-size: 0.8rem;
      padding: 0.35rem 0.5rem;
    }

    .timer-picker {
      margin-bottom: 0.6rem;
    }

    .timer-picker label {
      display: block;
      margin-bottom: 0.25rem;
      font-size: 0.8rem;
      color: var(--text-main);
    }

    #session-duration-range {
      width: 100%;
    }

    .timer-value-display {
      margin-top: 0.3rem;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-main);
    }

    .timer-quick-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-bottom: 0.5rem;
    }

    .timer-quick-buttons .btn-sm {
      flex: 1;
      min-width: 80px;
      text-align: center;
    }

    @media (max-width: 960px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
      .top-bar {
        flex-direction: column;
        align-items: stretch;
      }
      .top-bar-right {
        width: 100%;
        justify-content: flex-start;
      }
      .main-session-btn {
        width: 100%;
      }
    }

    @media (max-width: 640px) {
      .app-shell {
        padding-inline: 0.9rem;
      }
      .loveboard-grid {
        grid-template-columns: minmax(0, 1fr);
      }
      .questions-toolbar {
        flex-direction: column;
        align-items: stretch;
      }
      .search-wrapper {
        order: 1;
      }
      .question-display-wrapper {
        grid-template-columns: minmax(0,1fr);
      }
      .question-display-copy-btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
<div class="app-shell">
  <div class="top-bar">
    <div class="logo-block">
      <div class="logo-dot"></div>
      <div>
        <div class="logo-text-main">Ø¬Ù„Ø³Ø© Ø­Ø¨ Ø§Ù„ÙŠÙˆÙ…</div>
        <div class="logo-text-sub">Ø£Ø³Ø¦Ù„Ø© Ø¹Ù…ÙŠÙ‚Ø©ØŒ Ø£Ø¬ÙˆØ§Ø¡ Ù‡Ø§Ø¯Ø¦Ø©ØŒ ÙˆÙ…ÙˆØ³ÙŠÙ‚Ù‰ ØªÙ†Ø§Ø³Ø¨ Ø¹Ù„Ø§Ù‚ØªÙƒÙ….</div>
      </div>
    </div>
    <div class="top-bar-right">
      <button class="main-session-btn" id="start-session-btn" type="button">
        <span>Ø§Ø¨Ø¯Ø£ Ø¬Ù„Ø³Ø© Ø­Ø¨ Ø§Ù„ÙŠÙˆÙ…</span>
        <div class="main-session-meta">Ù…Ø¯Ø© Ù…Ù‚ØªØ±Ø­Ø©: 30 - 45 Ø¯Ù‚ÙŠÙ‚Ø© Â· ÙŠÙØ¶Ù„ Ø¥Ø·ÙØ§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©</div>
      </button>
      <div class="top-bar-small-buttons">
        <button class="theme-toggle-btn" id="daynight-btn" type="button">
          <span class="btn-icon" id="daynight-icon">â˜€ï¸</span>
          <span id="daynight-label">ÙˆØ¶Ø¹ Ù†Ù‡Ø§Ø±ÙŠ</span>
        </button>
        <button class="theme-toggle-btn" id="theme-btn" type="button">
          <span class="btn-icon">ğŸ¨</span>
          ØªØ®ØµÙŠØµ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø«ÙŠÙ…
        </button>
      </div>
    </div>
  </div>

  <div class="layout">
    <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£ÙŠØ³Ø± -->
    <div class="left-col">
      <!-- Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø¬Ù„Ø³Ø© -->
      <div class="card session-music" id="session-music-card">
        <div class="card-header-title">Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø¬Ù„Ø³Ø©</div>
        <div class="card-subtitle">Ø§Ø®ØªØ± Ø£ØºÙ†ÙŠØ© Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ Ù„ØªÙƒÙˆÙ† Ø®Ù„ÙÙŠØ© Ù†Ø§Ø¹Ù…Ø© Ù„Ù„Ø¬Ù„Ø³Ø©.</div>

        <div class="music-dropzone" id="music-dropzone">
          <div class="music-dropzone-inner">
            <div class="music-dropzone-icon">â™«</div>
            <div class="music-dropzone-text">
              <button class="music-upload-btn" id="session-music-btn" type="button">
                ØªØ´ØºÙŠÙ„ Ø£ØºÙ†ÙŠØ© Ù„Ù„Ø¬Ù„Ø³Ø© Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ
              </button>
              <span class="music-drop-hint">
                ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø­Ø¨ Ù…Ù„Ù Ø§Ù„Ø£ØºÙ†ÙŠØ© ÙˆØ¥ÙÙ„Ø§ØªÙ‡ Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ØµÙˆØªÙŠ (MP3, WAV, OGG...).
              </span>
            </div>
          </div>
          <input type="file" id="session-music-input" accept="audio/*" hidden>
        </div>

        <div class="music-meta" id="music-meta" style="display:none;">
          <div class="music-title-row">
            <span class="music-title-label">Ø§Ù„Ø£ØºÙ†ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</span>
            <span class="music-title" id="music-title"></span>
          </div>
          <div class="music-extra">
            <span id="music-filesize"></span>
          </div>
        </div>

        <div class="music-controls" id="music-controls" style="display:none;">
          <div class="music-main-controls">
            <button class="music-icon-btn" id="music-play-pause" disabled title="ØªØ´ØºÙŠÙ„ / Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª">â–¶</button>
            <button class="music-icon-btn" id="music-restart" disabled title="Ø¥Ø¹Ø§Ø¯Ø© Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©">â†º</button>
            <button class="music-icon-btn" id="music-loop" data-active="false" disabled title="ØªÙƒØ±Ø§Ø± Ø§Ù„Ø£ØºÙ†ÙŠØ©">âŸ²</button>
          </div>
          <div class="music-progress-wrapper">
            <span class="music-time" id="music-current-time">0:00</span>
            <input type="range" id="music-progress" min="0" max="100" value="0">
            <span class="music-time" id="music-duration">0:00</span>
          </div>
          <div class="music-volume-wrapper">
            <button class="music-icon-btn" id="music-mute" title="ÙƒØªÙ… / Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒØªÙ…">ğŸ”Š</button>
            <input type="range" id="music-volume" min="0" max="1" step="0.01" value="0.8">
          </div>
        </div>

        <label class="music-autoplay-toggle">
          <input type="checkbox" id="music-autoplay-toggle">
          <span class="toggle-slider"></span>
          <span class="toggle-label">ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØºÙ†ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ù…Ø¬Ø±Ø¯ Ø§Ø®ØªÙŠØ§Ø±Ù‡Ø§</span>
        </label>

        <audio id="session-music-audio"></audio>
      </div>

      <!-- LoveBoard -->
      <div class="card loveboard">
        <div class="card-header-title">LoveBoard</div>
        <div class="card-subtitle">Ù‚Ø³Ù… Ù…Ù†Ø¸Ù… Ù„Ø£Ù‡Ù… ØªÙØ§ØµÙŠÙ„ Ø¹Ù„Ø§Ù‚ØªÙƒÙ…: Ø°ÙƒØ±ÙŠØ§ØªØŒ Ø±Ø³Ø§Ø¦Ù„ØŒ Ø£Ù‡Ø¯Ø§ÙØŒ ÙˆÙ„Ø¹Ø¨Ø© Ø­Ø¨ Ø³Ø±ÙŠØ¹Ø©.</div>

        <div class="loveboard-grid">
          <button class="loveboard-btn" data-board="memories">
            <span>Ø°ÙƒØ±ÙŠØ§ØªÙƒÙ… Ø§Ù„Ù…ÙØ¶Ù„Ø©</span>
            <span class="loveboard-tag">Ø£Ø¬Ù…Ù„ 5 Ø°ÙƒØ±ÙŠØ§Øª</span>
          </button>
          <button class="loveboard-btn" data-board="messages">
            <span>Ø±Ø³Ø§Ø¦Ù„ Ø­Ø¨ Ù‚ØµÙŠØ±Ø©</span>
            <span class="loveboard-tag">5 Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©</span>
          </button>
          <button class="loveboard-btn" data-board="goals">
            <span>Ø£Ù‡Ø¯Ø§Ù Ù…Ø´ØªØ±ÙƒØ©</span>
            <span class="loveboard-tag">15 Ù‡Ø¯Ù Ù…Ø´ØªØ±Ùƒ Ø£Ùˆ Ø£ÙƒØ«Ø±</span>
          </button>
          <button class="loveboard-btn" data-board="fast-game">
            <span>Ù„Ø¹Ø¨Ø© Ø­Ø¨ Ø³Ø±ÙŠØ¹Ø©</span>
            <span class="loveboard-tag">5 Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ù…ØªØ¬Ø¯Ø¯Ø©</span>
          </button>
        </div>

        <div class="loveboard-note">
          ÙŠÙ…ÙƒÙ†ÙƒÙ… Ø§Ù„Ø¹ÙˆØ¯Ø© ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª ÙˆØ§Ù„Ø£Ù‡Ø¯Ø§Ù ÙÙŠ Ø£ÙŠ ÙˆÙ‚ØªØŒ ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ù„Ù„Ø¹Ø¨Ø© ØªØªØ¬Ø¯Ø¯ ÙÙŠ ÙƒÙ„ Ù…Ø±Ø©.
        </div>
      </div>

      <!-- Ø§Ù„Ø­Ø³Ø§Ø¨ -->
      <div class="card account-card">
        <div class="account-main-line">
          Ø£Ù†Øª Ø­Ø§Ù„ÙŠØ§Ù‹ ÙÙŠ <span class="account-highlight">Ø¬Ù„Ø³Ø© Ø­Ø¨ Ù†Ø´Ø·Ø©</span>. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ù„Ø§ Ø­Ø¯ÙˆØ¯ Ù„Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰.
        </div>
        <div class="account-note">
          Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø³ÙŠØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙˆØ­Ø°Ù Ø§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ù„Ø³Ø© ÙÙ‚Ø·.
        </div>
        <button class="logout-btn" id="logout-btn" type="button">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
      </div>
    </div>

    <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£ÙŠÙ…Ù† -->
    <div class="right-col">
      <div class="session-timer-banner" id="session-timer-banner" style="display:none;">
        <span id="session-timer-text">Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø²Ù…Ù† Ù„Ù„Ø¬Ù„Ø³Ø© Ø¨Ø¹Ø¯.</span>
        <button class="btn-sm" id="session-timer-stop" type="button">Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª</button>
      </div>

      <div class="card session-settings-card">
        <div class="session-settings-top">
          <div>
            <div class="card-header-title">Ø¬Ù„Ø³Ø© Ø§Ù„ÙŠÙˆÙ…</div>
            <div class="session-info-line">Ø§Ø®ØªØ± Ù†Ù…Ø· Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø­ØªÙ‰ Ù†Ø¶Ø¨Ø· Ø§Ù„Ø£Ø¬ÙˆØ§Ø¡ ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† (ÙˆÙŠÙ…ÙƒÙ† ØªØ·ÙˆÙŠØ± Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†Ù…Ø· Ù„Ø§Ø­Ù‚Ø§Ù‹).</div>
          </div>
          <div class="relation-modes" id="relation-modes">
            <button class="relation-mode-btn active" data-mode="love" type="button">Ø­Ø¨ / ØªØ¹Ø§Ø±Ù</button>
            <button class="relation-mode-btn" data-mode="engaged" type="button">Ù…Ø®Ø·ÙˆØ¨ÙŠÙ†</button>
            <button class="relation-mode-btn" data-mode="married" type="button">Ù…ØªØ²ÙˆØ¬ÙŠÙ†</button>
            <button class="relation-mode-btn" data-mode="special" type="button">Ø¹Ù„Ø§Ù‚Ø© Ø®Ø§ØµØ© Ø£Ø®Ø±Ù‰</button>
          </div>
        </div>
        <div class="session-settings-bottom">
          <div class="pill-muted">ØªØºÙŠÙŠØ± Ù†Ù…Ø· Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© ÙŠØºÙŠÙ‘Ø± Ø§Ù„Ø«ÙŠÙ… ÙˆØ§Ù„Ø£Ø¬ÙˆØ§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.</div>
          <div class="pill-muted">ÙŠÙ…ÙƒÙ†ÙƒÙ… Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù†Ù…Ø§Ø· ÙÙŠ Ø£ÙŠ Ù„Ø­Ø¸Ø© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©.</div>
        </div>
      </div>

      <!-- Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¬Ù„Ø³Ø© -->
      <div class="card questions-card">
        <div class="questions-header">
          <div class="questions-header-title">Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¬Ù„Ø³Ø©</div>
          <div class="questions-header-badge" id="questions-header-badge">Ø­ÙˆØ§Ù„ÙŠ 2500 Ø³Ø¤Ø§Ù„ Ù…ÙˆØ²Ø¹Ø© Ø¹Ù„Ù‰ Ø®Ù…Ø³ Ø®Ø§Ù†Ø§Øª.</div>
        </div>

        <div class="questions-toolbar">
          <div class="search-wrapper">
            <span style="font-size:0.85rem;">ğŸ”</span>
            <input type="text" id="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø³Ø¤Ø§Ù„ Ù…Ø¹ÙŠÙ‘Ù† Ø£Ùˆ ÙƒÙ„Ù…Ø© (Ù…Ø«Ù„Ø§Ù‹: ØºÙŠØ±Ø©ØŒ Ø¶Ø­ÙƒØŒ Ø®ÙˆÙ)..." />
          </div>
          <select class="mini-select" id="tag-filter">
            <option value="all">ÙƒÙ„ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</option>
            <option value="love">Ø­Ø¨ / Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ</option>
            <option value="funny">Ù…Ø¶Ø­Ùƒ / Ø¶Ø­Ùƒ</option>
            <option value="daring">Ø¬Ø±ÙŠØ¡ / ØµØ±ÙŠØ­ Ø¨Ù„Ø·Ù</option>
            <option value="horror">Ø±Ø¹Ø¨ / ØºÙ…ÙˆØ¶</option>
            <option value="smart">Ø°ÙƒØ§Ø¡ / ÙØ·Ù†Ø©</option>
          </select>
          <button class="btn-soft" id="random-question-btn" type="button">
            <span class="btn-icon">ğŸ²</span>
            Ø³Ø¤Ø§Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
          </button>
          <button class="btn-primary-soft" id="ai-question-btn" type="button">
            <span class="btn-icon">âœ¨</span>
            Ø³Ø¤Ø§Ù„ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
          </button>
        </div>

        <div class="questions-ai-hint">
          Ø²Ø± "Ø³Ø¤Ø§Ù„ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ" ÙŠÙˆÙ„Ù‘Ø¯ Ø³Ø¤Ø§Ù„Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹ Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø© (Ø¨Ù…Ù†Ø·Ù‚ Ù…Ø´Ø§Ø¨Ù‡ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ) ÙŠØ®ØªÙ„Ù Ø¹Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø®Ø²Ù‘Ù†Ø©ØŒ
          ÙˆÙŠÙ…ÙƒÙ† Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹ Ø±Ø¨Ø·Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø©Ù‹ Ø¨Ø®Ø§Ø¯Ù… ChatGPT Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ùˆ Ø­Ø¨ÙŠØª ØªØ·ÙˆÙ‘Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø£ÙƒØ«Ø±.
        </div>

        <div class="question-display-wrapper">
          <div class="question-display" id="question-display-box">
            <div class="question-display-placeholder" id="question-display-placeholder">
              Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø³Ø¤Ø§Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ" Ø£Ùˆ "Ø³Ø¤Ø§Ù„ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ" Ù„ÙŠØ¸Ù‡Ø± Ø§Ù„Ø³Ø¤Ø§Ù„ Ù‡Ù†Ø§ ÙˆØªÙ‚Ø¯Ø± ØªÙ†Ø³Ø®Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø©Ù‹.
            </div>
            <div class="question-display-text" id="question-display-text" style="display:none;"></div>
          </div>
          <button class="btn-soft question-display-copy-btn" id="question-display-copy" type="button">
            <span class="btn-icon">ğŸ“‹</span>
            Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø§Ù„Ø¸Ø§Ù‡Ø±
          </button>
        </div>

        <div class="questions-list" id="questions-list"></div>

        <div class="badge-counter" id="questions-counter">
          <span id="visible-count">0</span> / <span id="total-count">0</span> Ø³Ø¤Ø§Ù„ Ù…ØªØ§Ø­ Ø­Ø§Ù„ÙŠØ§Ù‹
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ -->
<div class="modal-backdrop" id="logout-modal">
  <div class="modal">
    <div class="modal-title">ØªØ£ÙƒÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</div>
    <div class="modal-body">
      Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù†Ùƒ ØªØ±ÙŠØ¯ Ø¥Ù†Ù‡Ø§Ø¡ Ø¬Ù„Ø³Ø© Ø§Ù„Ø­Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŸ<br>
      Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ù„Ø³Ø© ÙˆØ§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ©ØŒ ÙˆÙ„Ø§ ÙŠØªÙ… Ø­ÙØ¸ Ø£ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø´Ø®ØµÙŠØ© Ø¹Ù„Ù‰ Ø®Ø§Ø¯Ù….
    </div>
    <div class="modal-actions">
      <button class="btn-sm" id="logout-cancel" type="button">Ø¥Ù„ØºØ§Ø¡</button>
      <button class="btn-sm btn-danger" id="logout-confirm" type="button">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ Ø­Ø¨ Ù‚ØµÙŠØ±Ø© -->
<div class="modal-backdrop" id="short-messages-modal">
  <div class="modal">
    <div class="modal-title">Ø±Ø³Ø§Ø¦Ù„ Ø­Ø¨ Ù‚ØµÙŠØ±Ø©</div>
    <div class="modal-body">
      <div id="short-messages-list" class="short-messages-list"></div>
      <button class="btn-sm" id="refresh-short-messages" type="button">ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</button>
      <div class="modal-body-note">
        ÙÙŠ ÙƒÙ„ Ù…Ø±Ø© ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± 5 Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù„Ø·ÙŠÙØ© ÙŠÙ…ÙƒÙ† Ù†Ø³Ø®Ù‡Ø§ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙƒÙ…Ø§ Ù‡ÙŠ.
      </div>
    </div>
    <div class="modal-actions">
      <button class="btn-sm" id="short-messages-close" type="button">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ø£Ù‡Ø¯Ø§Ù Ù…Ø´ØªØ±ÙƒØ© -->
<div class="modal-backdrop" id="goals-modal">
  <div class="modal">
    <div class="modal-title">Ø£Ù‡Ø¯Ø§Ù Ù…Ø´ØªØ±ÙƒØ©</div>
    <div class="modal-body">
      Ø§ÙƒØªØ¨ÙˆØ§ Ù…Ø¹Ø§Ù‹ Ø£Ù‡Ø¯Ø§ÙÙƒÙ… Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©. Ø­Ø§ÙˆÙ„ÙˆØ§ Ø£Ù† Ù„Ø§ ØªÙ‚Ù„ Ø¹Ù† 15 Ù‡Ø¯ÙØŒ ÙˆÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø£ÙƒØ«Ø± Ù„Ùˆ Ø£Ø­Ø¨Ø¨ØªÙ….
      <div class="goals-list" id="goals-list">
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 1</span><input data-index="0" type="text" placeholder="Ù…Ø«Ø§Ù„: Ù†Ø®ØµØµ ÙŠÙˆÙ… Ø«Ø§Ø¨Øª Ù„Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©."></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 2</span><input data-index="1" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 3</span><input data-index="2" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 4</span><input data-index="3" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 5</span><input data-index="4" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 6</span><input data-index="5" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 7</span><input data-index="6" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 8</span><input data-index="7" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 9</span><input data-index="8" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 10</span><input data-index="9" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 11</span><input data-index="10" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 12</span><input data-index="11" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 13</span><input data-index="12" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 14</span><input data-index="13" type="text"></div>
        <div class="goal-item"><span class="goal-label">Ù‡Ø¯Ù 15</span><input data-index="14" type="text"></div>
      </div>
      <div class="modal-body-note">
        ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø² ÙÙ‚Ø·ØŒ ÙˆÙŠÙ…ÙƒÙ†ÙƒÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª Ù…Ù† Ø®Ù„Ø§Ù„ Ù†ÙØ³ Ø§Ù„Ø²Ø±.
      </div>
    </div>
    <div class="modal-actions">
      <button class="btn-sm" id="goals-close" type="button">ØªÙ…</button>
    </div>
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ù„Ø¹Ø¨Ø© Ø­Ø¨ Ø³Ø±ÙŠØ¹Ø© -->
<div class="modal-backdrop" id="fast-game-modal">
  <div class="modal">
    <div class="modal-title">Ù„Ø¹Ø¨Ø© Ø­Ø¨ Ø³Ø±ÙŠØ¹Ø©</div>
    <div class="modal-body">
      <div id="fast-game-list" class="short-messages-list"></div>
      <button class="btn-sm" id="refresh-fast-game" type="button">ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª</button>
      <div class="modal-body-note">
        Ø­Ø§Ù„ÙŠØ§Ù‹ ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©. ÙŠÙ…ÙƒÙ† Ù„Ø§Ø­Ù‚Ø§Ù‹ Ø±Ø¨Ø· Ù‡Ø°Ø§ Ø§Ù„Ø²Ø± Ø¨Ø®Ø§Ø¯Ù… ÙŠØ³ØªØ®Ø¯Ù… ChatGPT
        Ù„ØªÙˆÙ„ÙŠØ¯ Ø£Ø³Ø¦Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© ØªÙ…Ø§Ù…Ø§Ù‹ ÙÙŠ ÙƒÙ„ Ù…Ø±Ø© Ø­Ø³Ø¨ Ù†Ù…Ø· Ø¹Ù„Ø§Ù‚ØªÙƒÙ….
      </div>
    </div>
    <div class="modal-actions">
      <button class="btn-sm" id="fast-game-close" type="button">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
  </div>
</div>

<!-- ØµÙØ­Ø© ÙØ±Ø¹ÙŠØ©: Ø°ÙƒØ±ÙŠØ§ØªÙƒÙ… Ø§Ù„Ù…ÙØ¶Ù„Ø© -->
<div class="memories-overlay" id="memories-page">
  <div class="memories-panel">
    <div class="memories-header">
      <button class="btn-back" id="memories-back-btn" type="button">â† Ø±Ø¬ÙˆØ¹ Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</button>
      <div>
        <div class="memories-title">Ø°ÙƒØ±ÙŠØ§ØªÙƒÙ… Ø§Ù„Ù…ÙØ¶Ù„Ø©</div>
        <div class="memories-subtitle">
          Ø§ÙƒØªØ¨ÙˆØ§ Ø£Ø¬Ù…Ù„ 5 Ø°ÙƒØ±ÙŠØ§Øª ØªØ¬Ù…Ø¹ÙƒÙ…. Ø¨Ø¥Ù…ÙƒØ§Ù†ÙƒÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ ÙÙŠ Ø£ÙŠ ÙˆÙ‚ØªØŒ ÙˆÙŠØªÙ… Ø­ÙØ¸Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø².
        </div>
      </div>
    </div>
    <div class="memories-list">
      <div class="memory-item">
        <div class="memory-label">Ø§Ù„Ø°ÙƒØ±Ù‰ 1</div>
        <textarea data-index="0" placeholder="Ù…Ø«Ø§Ù„: Ø£ÙˆÙ„ Ù…Ø±Ø© Ø§Ù„ØªÙ‚ÙŠÙ†Ø§ Ø¨Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„ÙÙ„Ø§Ù†ÙŠ..."></textarea>
      </div>
      <div class="memory-item">
        <div class="memory-label">Ø§Ù„Ø°ÙƒØ±Ù‰ 2</div>
        <textarea data-index="1"></textarea>
      </div>
      <div class="memory-item">
        <div class="memory-label">Ø§Ù„Ø°ÙƒØ±Ù‰ 3</div>
        <textarea data-index="2"></textarea>
      </div>
      <div class="memory-item">
        <div class="memory-label">Ø§Ù„Ø°ÙƒØ±Ù‰ 4</div>
        <textarea data-index="3"></textarea>
      </div>
      <div class="memory-item">
        <div class="memory-label">Ø§Ù„Ø°ÙƒØ±Ù‰ 5</div>
        <textarea data-index="4"></textarea>
      </div>
    </div>
    <div class="memories-footer">
      Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ù‡ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª Ù…Ø®Ø²Ù†Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙŠ Ù…ØªØµÙØ­Ùƒ (localStorage) ÙˆÙ„Ø§ ØªÙØ±ÙØ¹ Ø¥Ù„Ù‰ Ø£ÙŠ Ø®Ø§Ø¯Ù….
    </div>
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ù…Ø¤Ù‚Øª Ø§Ù„Ø¬Ù„Ø³Ø© -->
<div class="modal-backdrop" id="session-timer-modal">
  <div class="modal">
    <div class="modal-title">Ø²Ù…Ù† Ø¬Ù„Ø³Ø© Ø§Ù„ÙŠÙˆÙ…</div>
    <div class="modal-body">
      <div class="timer-picker">
        <label for="session-duration-range">Ø§Ø®ØªØ± Ø²Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© (Ù…Ù† 5 Ø¥Ù„Ù‰ 90 Ø¯Ù‚ÙŠÙ‚Ø©):</label>
        <input type="range" id="session-duration-range" min="5" max="90" step="5" value="30">
        <div class="timer-value-display">
          Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ø­Ø§Ù„ÙŠ: <span id="session-duration-label">30</span> Ø¯Ù‚ÙŠÙ‚Ø©
        </div>
      </div>
      <div class="timer-quick-buttons">
        <button class="btn-sm" data-session-min="15" type="button">15 Ø¯Ù‚ÙŠÙ‚Ø©</button>
        <button class="btn-sm" data-session-min="30" type="button">30 Ø¯Ù‚ÙŠÙ‚Ø©</button>
        <button class="btn-sm" data-session-min="45" type="button">45 Ø¯Ù‚ÙŠÙ‚Ø©</button>
        <button class="btn-sm" data-session-min="60" type="button">60 Ø¯Ù‚ÙŠÙ‚Ø©</button>
      </div>
      <div class="modal-body-note">
        ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ù‡Ø°Ø§ Ø§Ù„ÙˆÙ‚Øª ÙÙŠ Ø£ÙŠ Ù„Ø­Ø¸Ø© Ø¨Ø¶ØºØ· Ù†ÙØ³ Ø§Ù„Ø²Ø±ØŒ ÙˆØ§Ù„Ù…Ø¤Ù‚Øª Ù…Ø¬Ø±Ø¯ Ø¯Ù„ÙŠÙ„ Ù†Ø§Ø¹Ù… Ù„Ù„Ø¬Ù„Ø³Ø© ÙˆÙ„ÙŠØ³ Ø¥Ù„Ø²Ø§Ù…ÙŠØ§Ù‹.
      </div>
    </div>
    <div class="modal-actions">
      <button class="btn-sm" id="session-timer-cancel" type="button">Ø¥Ù„ØºØ§Ø¡</button>
      <button class="btn-sm btn-danger" id="session-timer-start" type="button">Ø¨Ø¯Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©</button>
    </div>
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ ØªØ®ØµÙŠØµ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø«ÙŠÙ… -->
<div class="modal-backdrop" id="theme-modal">
  <div class="modal">
    <div class="modal-title">ØªØ®ØµÙŠØµ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø«ÙŠÙ…</div>
    <div class="modal-body">
      <div class="theme-section-title">Ø«ÙŠÙ…Ø§Øª Ø¬Ø§Ù‡Ø²Ø©</div>
      <div class="theme-presets-grid" id="theme-presets-grid">
        <button class="theme-preset" data-theme="romantic-night">
          <div class="theme-preset-main">Ù„ÙŠÙ„Ø© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©</div>
          <div class="theme-preset-sub">Ø¨Ù†ÙØ³Ø¬ÙŠ ØºØ§Ù…Ù‚ + ÙˆØ±Ø¯ÙŠ</div>
          <div class="theme-preset-preview" style="background:linear-gradient(90deg,#ff4a8d,#9b5bff,#1a1029);"></div>
        </button>
        <button class="theme-preset" data-theme="soft-rose">
          <div class="theme-preset-main">ÙˆØ±Ø¯ÙŠ Ù†Ø§Ø¹Ù…</div>
          <div class="theme-preset-sub">Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø±ÙˆØ² ÙˆØ§Ù„Ø°Ù‡Ø¨</div>
          <div class="theme-preset-preview" style="background:linear-gradient(90deg,#ff7ea3,#ffe3b8,#3e2234);"></div>
        </button>
        <button class="theme-preset" data-theme="ocean-love">
          <div class="theme-preset-main">Ø¨Ø­Ø± Ø§Ù„Ø­Ø¨</div>
          <div class="theme-preset-sub">Ø£Ø²Ø±Ù‚ + ØªØ±ÙƒÙˆØ§Ø²</div>
          <div class="theme-preset-preview" style="background:linear-gradient(90deg,#4ad2ff,#7effc8,#133145);"></div>
        </button>
        <button class="theme-preset" data-theme="golden-warm">
          <div class="theme-preset-main">Ø¯ÙØ¡ Ø°Ù‡Ø¨ÙŠ</div>
          <div class="theme-preset-sub">Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ ÙˆØ°Ù‡Ø¨ÙŠ Ø¯Ø§ÙØ¦</div>
          <div class="theme-preset-preview" style="background:linear-gradient(90deg,#ffb84a,#ff7e5f,#3b240f);"></div>
        </button>
        <button class="theme-preset" data-theme="midnight-blue">
          <div class="theme-preset-main">Ø³Ù…Ø§Ø¡ Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„</div>
          <div class="theme-preset-sub">Ø£Ø²Ø±Ù‚ Ø¯Ø§ÙƒÙ† + Ø³Ù…Ø§ÙˆÙŠ</div>
          <div class="theme-preset-preview" style="background:linear-gradient(90deg,#6a8bff,#c2e9ff,#111b3c);"></div>
        </button>
        <button class="theme-preset" data-theme="emerald-heart">
          <div class="theme-preset-main">Ù‚Ù„Ø¨ Ø²Ù…Ø±Ø¯ÙŠ</div>
          <div class="theme-preset-sub">Ø£Ø®Ø¶Ø± ÙØ§ØªØ­ + Ø£ØµÙØ±</div>
          <div class="theme-preset-preview" style="background:linear-gradient(90deg,#41f5b0,#f9ffb5,#10332a);"></div>
        </button>
      </div>

      <div class="theme-section-title">Ø£Ù„ÙˆØ§Ù† Ù…Ø®ØµØµØ© (RGB)</div>
      <div class="theme-custom-row">
        <span>Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Accent)</span>
        <input type="color" id="accent-color-input" value="#ff4a8d">
      </div>
      <div class="theme-custom-row">
        <span>Ù„ÙˆÙ† Ø§Ù„ØªØ£Ø«ÙŠØ± (Accent 2)</span>
        <input type="color" id="accent2-color-input" value="#ffb84a">
      </div>
      <button class="btn-sm" id="theme-random-rgb" type="button">ØªÙˆÙ„ÙŠØ¯ Ø£Ù„ÙˆØ§Ù† RGB Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©</button>

      <div class="theme-section-title" style="margin-top:0.8rem;">Ø£Ù„ÙˆØ§Ù† Ø²Ø± "Ø¬Ù„Ø³Ø© Ø­Ø¨ Ø§Ù„ÙŠÙˆÙ…"</div>
      <select class="theme-select" id="session-btn-theme-select">
        <option value="0">ØºØ±ÙˆØ¨ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ</option>
        <option value="1">Ù„ÙŠÙ„Ø© Ø¨Ù†ÙØ³Ø¬ÙŠØ©</option>
        <option value="2">Ù‚Ù„Ø¨ ÙˆØ±Ø¯ÙŠ</option>
        <option value="3">Ø­Ù„Ù… Ø£Ø²Ø±Ù‚</option>
        <option value="4">Ø·Ù„Ù‘Ø© Ø¹Ù†Ø§Ø¨ÙŠØ©</option>
        <option value="5">Ø­Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø·Ø¦</option>
        <option value="6">Ø´Ù…ÙˆØ¹ Ø¯Ø§ÙØ¦Ø©</option>
        <option value="7">Ù‚Ù…Ø± ÙˆØ±Ø¯ÙŠ</option>
        <option value="8">Ù„ÙŠÙ„ Ù…Ø®Ù…Ù„ÙŠ</option>
        <option value="9">Ù†Ø¨Ø¶ Ø¨Ù†ÙØ³Ø¬ÙŠ</option>
        <option value="10">Ø¨Ø³Ù…Ø© Ø­Ù…Ø±Ø§Ø¡</option>
        <option value="11">Ø³ÙƒØ± Ùˆ ÙØ§Ù†ÙŠÙ„Ø§</option>
        <option value="12">ØºÙŠÙ…Ø© Ø­Ø¨</option>
        <option value="13">Ù†Ø¨Ø¶Ø© Ø°Ù‡Ø¨ÙŠØ©</option>
        <option value="14">Ø´ÙÙ‚ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ</option>
        <option value="15">Ø¶ÙˆØ¡ Ø§Ù„Ø´Ù…ÙˆØ¹</option>
        <option value="16">Ø®Ø¬Ù„ ÙˆØ±Ø¯ÙŠ</option>
        <option value="17">Ù‚Ù„ÙˆØ¨ Ù…ØªØ´Ø§Ø¨ÙƒØ©</option>
        <option value="18">Ù„ÙŠÙ„ Ù‡Ø§Ø¯Ø¦</option>
        <option value="19">Ø­Ø¨ Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠ</option>
        <option value="20">Ù„ÙŠÙ„Ø© Ø²Ø±Ù‚Ø§Ø¡ Ù†Ø§Ø¹Ù…Ø©</option>
        <option value="21">Ø³ÙƒÙˆÙ† ÙˆØ±Ø¯ÙŠ Ø¨Ù†ÙØ³Ø¬ÙŠ</option>
        <option value="22">Ù‚ÙˆØ³ Ù‚Ø²Ø­ Ù„Ù„Ø¹Ø´Ø§Ù‚</option>
        <option value="23">ØºØ±ÙˆØ¨ Ù…Ø¹Ø·Ø±</option>
        <option value="24">Ø¹Ø´Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø·Ø¦</option>
        <option value="25">Ù„ÙŠÙ„Ø© Ù†Ø¬ÙˆÙ… Ø°Ù‡Ø¨ÙŠØ©</option>
        <option value="26">Ù‚Ù„Ø¨ Ø£Ø­Ù…Ø± Ø¯Ø§ÙƒÙ†</option>
        <option value="27">ØºÙŠÙ…Ø© Ø¨Ù†ÙØ³Ø¬ÙŠØ©</option>
        <option value="28">Ø¯ÙØ¡ ÙƒØ³ØªÙ†Ø§Ø¦ÙŠ</option>
        <option value="29">Ù†Ø³Ù…Ø© ÙˆØ±Ø¯ÙŠØ© Ø²Ø±Ù‚Ø§Ø¡</option>
      </select>

      <div class="modal-body-note">
        ÙŠØªÙ… Ø­ÙØ¸ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø«ÙŠÙ…Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø²ØŒ ÙˆÙŠÙ…ÙƒÙ†Ùƒ ØªØ¨Ø¯ÙŠÙ„Ù‡Ø§ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª.
      </div>
    </div>
    <div class="modal-actions">
      <button class="btn-sm" id="theme-close" type="button">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
  </div>
</div>

<script>
  // ===== 1) Ø«ÙŠÙ… Ù†Ù…Ø· Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© + ÙˆØµÙ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© =====
  (function () {
    const root = document.documentElement;
    const modeButtons = document.querySelectorAll(".relation-mode-btn");
    const headerBadge = document.getElementById("questions-header-badge");

    const modeMessages = {
      love: "Ø£Ø³Ø¦Ù„Ø© Ù…ÙˆØ²Ø¹Ø© Ø¨ÙŠÙ† Ø­Ø¨ØŒ Ø¶Ø­ÙƒØŒ Ø¬Ø±Ø£Ø© Ø®ÙÙŠÙØ©ØŒ Ø±Ø¹Ø¨ØŒ ÙˆØ°ÙƒØ§Ø¡.",
      engaged: "Ø£Ø³Ø¦Ù„Ø© Ù„Ø·ÙŠÙØ© ØªØ³Ø§Ø¹Ø¯ÙƒÙ… ØªØ¨Ù†ÙˆÙ† Ø­ÙˆØ§Ø± Ø«Ø§Ø¨Øª Ù‚Ø¨Ù„ Ø§Ù„Ø²ÙˆØ§Ø¬.",
      married: "Ø£Ø³Ø¦Ù„Ø© Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙØ¡ØŒ Ø§Ù„Ø¶Ø­ÙƒØŒ ÙˆØ§Ù„Ù…ØµØ§Ø±Ø­Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø²ÙˆØ§Ø¬.",
      special: "Ø£Ø³Ø¦Ù„Ø© Ù…Ø±Ù†Ø© ØªÙ†Ø§Ø³Ø¨ Ø£ÙŠ Ø¹Ù„Ø§Ù‚Ø© Ø®Ø§ØµØ© Ù„Ø§ ØªØ´Ø¨Ù‡ ØºÙŠØ±Ù‡Ø§."
    };

    modeButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        modeButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        const mode = btn.getAttribute("data-mode");
        root.setAttribute("data-mode", mode);
        headerBadge.textContent = modeMessages[mode] || "";
        filterAndRenderQuestions();
      });
    });
  })();

  // ===== 2) Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Ø­ÙˆØ§Ù„ÙŠ 2500 Ø³Ø¤Ø§Ù„) + Ø¹Ø±Ø¶Ù‡Ø§ =====
  const allQuestions = (function () {
    const patterns = [
      "Ø´Ù†Ùˆ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ØªØ­Ø¨ Ù†ÙƒØªØ´ÙÙ‡ Ø¹Ù† {topic} Ø¨ÙŠÙ†Ø§ØªÙ†Ø§ØŸ",
      "Ù„Ùˆ Ø£Ø³Ø£Ù„Ùƒ Ø³Ø¤Ø§Ù„ ÙˆØ§Ø­Ø¯ Ø¹Ù† {topic} Ø­ØªÙ‰ Ø£Ø¹Ø±ÙÙƒ Ø¨Ø¹Ù…Ù‚ØŒ Ø´Ù†Ùˆ ÙŠÙƒÙˆÙ†ØŸ",
      "Ø´Ù†Ùˆ Ø£ÙˆÙ„ Ø°ÙƒØ±Ù‰ ØªØ®Ø·Ø± Ø¨Ø¨Ø§Ù„Ùƒ Ù„Ù…Ø§ Ù†Ø³Ù…Ø¹ ÙƒÙ„Ù…Ø© {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø­Ø¯ÙˆØ¯Ùƒ Ø§Ù„Ø´Ø®ØµÙŠØ© Ø¨Ù…ÙˆØ¶ÙˆØ¹ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ ÙŠØ®ÙˆÙÙƒ Ø£ÙƒØ«Ø± Ø´ÙŠ Ø¨Ø®ØµÙˆØµ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ ÙŠØ¶Ø­ÙƒÙƒ Ø¥Ø°Ø§ ØµØ§Ø± Ù…Ø±ØªØ¨Ø· Ø¨Ù€ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ù…ÙˆÙ‚Ù Ø­Ù‚ÙŠÙ‚ÙŠ ØµØ§Ø± ÙˆÙŠØ§Ùƒ Ù„Ù‡ Ø¹Ù„Ø§Ù‚Ø© Ø¨Ù€ {topic} ÙˆØªØªÙ…Ù†Ù‰ ØªØ±ÙˆÙŠÙ‡ ÙƒÙ„ Ù…Ø±Ø©ØŸ",
      "Ù„Ùˆ Ù†Ù‡ØªÙ… Ø£ÙƒØ«Ø± Ø¨Ù€ {topic} Ø¨Ø­ÙŠØ§ØªÙ†Ø§ØŒ Ø´Ù†Ùˆ Ù…Ù…ÙƒÙ† ÙŠØªØºÙŠÙ‘Ø±ØŸ",
      "Ø¨Ø±Ø§ÙŠÙƒ Ø´Ù„ÙˆÙ† Ù†Ù‚Ø¯Ø± Ù†Ø­Ù„ Ø®Ù„Ø§Ù Ù„Ùˆ ÙƒØ§Ù† Ø³Ø¨Ø¨Ù‡ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ ØªØªÙ…Ù†Ù‰ Ù…Ø§ ÙŠØµÙŠØ± Ø£Ø¨Ø¯Ø§Ù‹ Ø¥Ø°Ø§ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ ÙŠØªØ¹Ù„Ù‘Ù‚ Ø¨Ù€ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø³Ø¤Ø§Ù„ Ù†ÙØ³Ùƒ Ø£Ø³Ø£Ù„Ùƒ Ø¥ÙŠØ§Ù‡ Ø¹Ù† {topic} Ø¨Ø³ Ø¨Ø¹Ø¯Ù†ÙŠ Ù…Ø§ Ø³Ø£Ù„ØªÙ‡ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ ÙŠØ®Ù„ÙŠÙƒ ØªØ­Ø³ Ø¨Ø§Ù„ÙØ®Ø± Ø¥Ø°Ø§ Ù†Ø¬Ø­Ù†Ø§ Ø¨ÙÙ‡Ù… {topic} Ø³ÙˆØ§ØŸ",
      "Ø´Ù†Ùˆ Ù†ÙˆØ¹ Ø§Ù„ÙƒÙ„Ø§Ù… Ø§Ù„Ù„ÙŠ ØªØ­Ø¨ ØªØ³Ù…Ø¹Ù‡ Ù…Ù†ÙŠ Ù„Ù…Ø§ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ ÙŠÙƒÙˆÙ† Ø¹Ù† {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø£Ø³ÙˆØ£ Ø·Ø±ÙŠÙ‚Ø© Ù…Ù…ÙƒÙ† Ù†ØªØ¹Ø§Ù…Ù„ Ø¨ÙŠÙ‡Ø§ Ù…Ø¹ {topic} ÙˆØªØªÙ…Ù†Ù‰ Ù†ØªØ¬Ù†Ø¨Ù‡Ø§ØŸ",
      "Ø´Ù†Ùˆ Ø£ÙØ¶Ù„ Ù†ØµÙŠØ­Ø© Ø³Ù…Ø¹ØªÙ‡Ø§ Ø¨Ø­ÙŠØ§ØªÙƒ Ø¹Ù† {topic}ØŸ",
      "Ù„Ùˆ ØªØµÙŠØ± Ø¨ÙŠÙ†Ø§ Ù„Ø¹Ø¨Ø© Ø£Ø³Ø¦Ù„Ø© ÙƒØ§Ù…Ù„Ø© Ø¹Ù† {topic}ØŒ Ø´Ù†Ùˆ Ø£ÙˆÙ„ Ø³Ø¤Ø§Ù„ ØªØ­Ø¨ ØªØ¨Ø¯ÙŠ Ø¨ÙŠÙ‡ØŸ",
      "Ø´Ù†Ùˆ Ø£ÙƒØ¨Ø± Ø®Ø·Ø£ Ù…Ù…ÙƒÙ† Ù†Ø±ØªÙƒØ¨Ù‡ Ø¥Ø°Ø§ Ø§Ø³ØªÙ‡Ù†Ù‘Ø§ Ø¨Ù…ÙˆØ¶ÙˆØ¹ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ Ù…Ø·Ù…Ø¦Ù† Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ø¥Ù„Ùƒ Ø¥Ø°Ø§ ØµØ§Ø± ÙŠØ­ØªØ±Ù… {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ø¨Ø³ÙŠØ· Ø§Ù„Ù„ÙŠ Ù†Ù‚Ø¯Ø± Ù†Ø³ÙˆÙŠÙ‡ Ø§Ù„ÙŠÙˆÙ… Ø­ØªÙ‰ Ù†Ø·ÙˆÙ‘Ø± Ù†Ø¸Ø±ØªÙ†Ø§ Ù„Ù€ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø£ÙƒØ«Ø± Ø¬Ø§Ù†Ø¨ Ù…Ø¬Ù‡ÙˆÙ„ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ø¥Ù„Ùƒ Ø¨Ø®ØµÙˆØµ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ ÙŠØ®Ù„ÙŠÙƒ ØªØ­Ø³ Ø¥Ù† Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„ ÙØ§Ù‡Ù… {topic} ØµØ­ØŸ",
      "Ø´Ù†Ùˆ Ø´ÙŠØ¡ ØªØªÙ…Ù†Ù‰ ØªØªØ¹Ù„Ù…Ù‡ Ø¨Ø¹Ø¯ Ø£ÙƒØ«Ø± Ø¹Ù† {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø´Ø¹ÙˆØ±Ùƒ Ù„Ù…Ø§ Ø£Ø­Ø¯ ÙŠØ³ØªÙ‡ÙŠÙ† Ø¨Ù…ÙˆØ¶ÙˆØ¹ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ù…ÙˆÙ‚Ù ØªØªÙˆÙ‚Ø¹ ÙŠØ®ØªØ¨Ø±Ù†Ø§ Ø¥Ø°Ø§ Ø§Ø±ØªØ¨Ø· Ø¨Ù€ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ ÙŠØ®Ù„ÙŠ {topic} Ù…Ù…ØªØ¹ Ø¨Ø¯Ø§Ù„ Ù…Ø§ ÙŠÙƒÙˆÙ† Ø«Ù‚ÙŠÙ„ØŸ"
    ];

    const loveTopics = [
      "Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ",
      "Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©",
      "Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù„ÙŠÙ„ÙŠØ©",
      "Ø§Ù„Ù…ÙØ§Ø¬Ø¢Øª Ø§Ù„Ø­Ù„ÙˆØ©",
      "Ø§Ù„ØºÙŠØ±Ø© Ø§Ù„Ù„Ø·ÙŠÙØ©",
      "Ø§Ù„Ø«Ù‚Ø© Ø¨ÙŠÙ†Ø§",
      "Ø§Ù„Ù…ØµØ§Ø±Ø­Ø© Ø¨Ø§Ù„Ù…Ø´Ø§Ø¹Ø±",
      "Ø§Ù„Ø§Ø­ØªÙˆØ§Ø¡ ÙˆÙ‚Øª Ø§Ù„ØªØ¹Ø¨",
      "Ø§Ù„Ø£Ù…Ø§Ù† Ù…Ø¹ Ø§Ù„Ø´Ø±ÙŠÙƒ",
      "Ù†Ø¸Ø±Ø§Øª Ø§Ù„Ø¹ÙŠÙˆÙ†",
      "Ù…Ø³ÙƒØ© Ø§Ù„ÙŠØ¯",
      "Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¨ÙŠÙ†Ø§ØªÙ†Ø§",
      "Ø§Ù„Ø§Ø¹ØªØ°Ø§Ø± Ù…Ù† Ø§Ù„Ù‚Ù„Ø¨",
      "Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ Ø§Ù„ØµØºÙŠØ±Ø©",
      "Ø§Ù„Ø§Ø­ØªÙØ§Ù„ Ø¨Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª",
      "Ø§Ù„ÙˆØ¹ÙˆØ¯ Ø¨ÙŠÙ†Ø§ØªÙ†Ø§",
      "Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø®Ø§Øµ Ø¨ÙŠÙ†Ø§ØªÙ†Ø§",
      "Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø¨ØªÙØ§ØµÙŠÙ„Ùƒ",
      "Ø§Ù„ÙƒÙ„Ø§Ù… Ø§Ù„Ø­Ù„Ùˆ Ø§Ù„ØµØ§Ø¯Ù‚",
      "Ø§Ù„Ø¯Ø¹Ù… ÙˆÙ‚Øª Ø§Ù„Ù…Ø´Ø§ÙƒÙ„",
      "Ø§Ù„Ø¶Ø­Ùƒ Ø§Ù„Ù…Ø´ØªØ±Ùƒ Ø¨ÙŠÙ†Ø§",
      "Ø§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ù„ÙŠ Ù†Ø±ÙˆØ­Ù‡Ø§ Ø³ÙˆØ§",
      "Ø®Ø·Ø· Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø¨ÙŠÙ†Ø§ØªÙ†Ø§",
      "Ø§Ù„Ø­Ø¶Ù† ÙˆÙ‚Øª Ø§Ù„Ø®ÙˆÙ",
      "Ø§Ù„Ù‡Ø¯ÙˆØ¡ Ù„Ù…Ø§ Ù†ÙƒÙˆÙ† Ø³ÙˆØ§"
    ];

    const funnyTopics = [
      "Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„Ù…Ø­Ø±Ø¬Ø©",
      "Ø§Ù„Ø¶Ø­Ùƒ Ø¨Ø¯ÙˆÙ† Ø³Ø¨Ø¨",
      "Ø§Ù„Ù…Ù‚Ø§Ù„Ø¨ Ø§Ù„Ù„Ø·ÙŠÙØ©",
      "Ø§Ù„ØµÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø§Ù„ØºØ±ÙŠØ¨Ø©",
      "Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø³Ø±ÙŠØ¹Ø©",
      "Ø§Ù„Ø±Ù‚Øµ Ø§Ù„ØºØ±ÙŠØ¨",
      "Ø§Ù„ÙÙ„ØªØ±Ø§Øª Ø§Ù„Ù…Ø¶Ø­ÙƒØ©",
      "Ø­Ø±ÙƒØ§ØªÙƒ Ø§Ù„Ø¹ÙÙˆÙŠØ©",
      "Ø§Ù„Ù†ÙƒØ§Øª Ø§Ù„Ø¨Ø§ÙŠØ®Ø©",
      "Ø§Ù„Ø£ÙƒÙ„ Ø§Ù„Ù„ÙŠ Ø§Ø­ØªØ±Ù‚",
      "Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ù†ØµÙŠØ© Ø§Ù„ØºØ±ÙŠØ¨Ø©",
      "Ø£ÙˆÙ„ Ù…ÙƒØ§Ù„Ù…Ø© Ø¨ÙŠÙ†Ø§ØªÙ†Ø§",
      "Ø£ÙˆÙ„ Ù…ÙˆØ¹Ø¯ ÙØ§Ø´Ù„",
      "Ø§Ù„Ù†ÙˆÙ… ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ØºÙ„Ø·",
      "Ø­Ø°Ø§Ø¡Ùƒ Ø§Ù„Ù…Ø²Ø¹Ø¬",
      "ØµÙˆØª Ø§Ù„Ø¶Ø­ÙƒØ©",
      "Ø§Ù„Ø£Ù„Ù‚Ø§Ø¨ Ø§Ù„ØºØ±ÙŠØ¨Ø© Ø¨ÙŠÙ†Ø§ØªÙ†Ø§",
      "Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„Ù„ÙŠ Ù†Ø¹ÙŠØ¯Ù‡Ø§ Ø¯Ø§Ø¦Ù…Ù‹Ø§",
      "Ø§Ù„Ø³ÙØ± Ø§Ù„ÙƒØ§Ø±Ø«ÙŠ Ø§Ù„Ù…Ø¶Ø­Ùƒ",
      "ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ø·Ø¨Ø® Ø§Ù„ÙØ§Ø´Ù„Ø©",
      "Ø§Ù„Ø²Ù„Ø© Ø¨Ø§Ù„ÙƒÙ„Ø§Ù…",
      "Ø§Ù„Ù…ÙŠÙ…Ø² Ø§Ù„Ù„ÙŠ Ù†Ø±Ø³Ù„Ù‡Ø§ Ù„Ø¨Ø¹Ø¶",
      "Ø§Ù„Ø¶Ø­ÙƒØ© Ø§Ù„Ù„ÙŠ Ù…Ø§ Ù†Ù‚Ø¯Ø± Ù†ÙˆÙ‚ÙÙ‡Ø§",
      "Ø§Ù„Ù„Ø®Ø¨Ø·Ø© Ø¨Ø§Ù„Ø£Ø³Ù…Ø§Ø¡",
      "Ø§Ù„Ø¶Ø­Ùƒ ÙˆÙ‚Øª Ø§Ù„Ø¬Ø¯ÙŠØ©"
    ];

    const daringTopics = [
      "Ø§Ù„Ø¬Ø±Ø£Ø© Ø¨Ø§Ù„ÙƒÙ„Ø§Ù… Ø§Ù„ØµØ±ÙŠØ­",
      "Ø§Ù„Ù…ØµØ§Ø±Ø­Ø© Ø¨Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ù‚ÙˆÙŠØ©",
      "ÙØªØ­ Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø­Ø³Ø§Ø³Ø©",
      "Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø¬Ø³Ø¯ÙŠØ© Ø¨Ø§Ø­ØªØ±Ø§Ù…",
      "Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø¹Ù† Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬ Ø§Ù„Ø¹Ø§Ø·ÙÙŠ",
      "Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©",
      "ØªØ¬Ø§Ø±Ø¨Ùƒ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©",
      "Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù…Ø§Ø¶ÙŠ",
      "Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø­Ù…Ø±Ø§Ø¡ Ø¨Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©",
      "Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø§Ù„Ù„ÙŠ ØªØ®Ø¬Ù„ ØªØ­Ú†ÙŠ Ø¹Ù†Ù‡Ø§",
      "Ø§Ù„ØºÙŠØ±Ø© Ø§Ù„Ù‚ÙˆÙŠØ©",
      "Ø§Ù„Ø´Ø¹ÙˆØ± Ø¨Ø§Ù„Ø±ÙØ¶",
      "ØªÙ‚Ø¨Ù„ Ø§Ù„Ù†Ù‚Ø¯",
      "ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø§Ø¹ØªØ±Ø§Ù Ø¨Ø´ÙŠ ØºÙ„Ø·",
      "Ø±Ø¯Ø© ÙØ¹Ù„Ùƒ Ù„Ù…Ø§ Ø£Ù†Ø¬Ø±Ø­",
      "Ø§Ù„Ù…Ø®Ø§ÙˆÙ Ø§Ù„Ù„ÙŠ Ù…Ø§ ØªØ­Ø¨ Ø£Ø­Ø¯ ÙŠØ¹Ø±ÙÙ‡Ø§",
      "Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¨Ø¯ÙˆÙ† Ù„Ù",
      "Ø§Ù„Ù„Ù‚Ø§Ø¡Ø§Øª ÙˆØ¬Ù‡Ù‹Ø§ Ù„ÙˆØ¬Ù‡ ÙˆÙ‚Øª Ø§Ù„Ù…Ø´Ø§ÙƒÙ„",
      "Ø§Ù„ÙƒÙ„Ø§Ù… ÙˆÙ‚Øª Ø§Ù„ØºØ¶Ø¨",
      "Ø§Ù„ÙˆØ¹ÙˆØ¯ Ø§Ù„Ù„ÙŠ Ø®ÙØª Ù…Ù† ÙƒØ³Ø±Ù‡Ø§",
      "Ø§Ù„ØªÙ†Ø§Ø²Ù„ Ø¹Ù† Ø´ÙŠ Ù…Ù‡Ù…",
      "Ø§Ù„Ù…ØµØ§Ø±Ø­Ø© Ø¨Ø¶Ø¹ÙÙƒ",
      "Ø§Ù„Ø­Ø¯ÙŠØ« Ø¹Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¨Ø¯ÙˆÙ† Ø¯ÙØ§Ø¹",
      "Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø¨Ø¯ÙˆÙ† ØªØ²ÙŠÙŠÙ†"
    ];

    const horrorTopics = [
      "Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ù…Ù‡Ø¬ÙˆØ±Ø©",
      "Ø§Ù„Ù„ÙŠÙ„ ÙˆØ§Ù„Ù…Ø·Ø±",
      "Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡",
      "Ø§Ù„Ø£ØµÙˆØ§Øª Ø§Ù„ØºØ±ÙŠØ¨Ø© Ø¨Ø§Ù„Ø¨ÙŠØª",
      "Ø§Ù„Ù…Ø´ÙŠ Ø¨Ø§Ù„Ø¸Ù„Ø§Ù…",
      "Ø§Ù„ÙƒÙˆØ§Ø¨ÙŠØ³ Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©",
      "Ø§Ù„Ù‚ØµØµ Ø§Ù„Ù…Ø±Ø¹Ø¨Ø©",
      "Ø£ÙÙ„Ø§Ù… Ø§Ù„Ø±Ø¹Ø¨",
      "Ø§Ù„Ø¨ÙŠÙˆØª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©",
      "Ø§Ù„Ù…Ù…Ø±Ø§Øª Ø§Ù„Ø·ÙˆÙŠÙ„Ø©",
      "Ø§Ù„ØºØ±Ù Ø§Ù„Ù…ØºÙ„Ù‚Ø©",
      "Ø§Ù„Ø£ØµÙˆØ§Øª ØªØ­Øª Ø§Ù„Ø³Ø±ÙŠØ±",
      "Ø¸Ù„ Ø´Ø®Øµ ØºØ±ÙŠØ¨",
      "Ø§Ø®ØªÙØ§Ø¡ Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ ÙØ¬Ø£Ø©",
      "Ø§Ù„Ù‡Ø¯ÙˆØ¡ Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø¨Ù‡",
      "Ø§Ù„Ø·Ø±Ù‚Ø§Øª Ø¨Ø¹Ø¯ Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„",
      "Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„Ù„ÙŠ ØªØ´Ø¨Ù‡ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø©",
      "Ø§Ù„Ù‚ØµØµ Ø§Ù„Ø´Ø¹Ø¨ÙŠØ© Ø§Ù„Ù…Ø®ÙŠÙØ©",
      "Ø§Ù„Ø¬Ù„ÙˆØ³ ÙˆØ­Ø¯Ùƒ ÙˆØ§Ù„ÙƒÙ„ Ù†Ø§ÙŠÙ…",
      "Ø§Ù„Ù…ØµØ¹Ø¯ Ø§Ù„Ø¹Ø§Ù„Ù‚",
      "Ø§Ù„Ø·Ø±Ù‚ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø§Ø¨ Ø¨Ø§Ù„Ù„ÙŠÙ„",
      "ØµÙˆØª Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…ØªØ£Ø®Ø±",
      "Ø§Ù†Ø·ÙØ§Ø¡ Ø§Ù„Ø£Ù†ÙˆØ§Ø± ÙØ¬Ø£Ø©",
      "Ø§Ù„Ø­Ù„Ù… Ø§Ù„Ù„ÙŠ ØªØ­Ø³Ù‘Ù‡ Ø±Ø³Ø§Ù„Ø©",
      "Ø§Ù„Ø¥Ø­Ø³Ø§Ø³ Ø¥Ù† Ø£Ø­Ø¯ ÙŠØ±Ø§Ù‚Ø¨Ùƒ"
    ];

    const smartTopics = [
      "Ø§Ù„Ø£Ù„ØºØ§Ø² Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ©",
      "Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø°ÙƒÙŠØ©",
      "Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©",
      "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ù",
      "Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù‚ÙˆÙŠØ©",
      "Ø§Ù„ØªØ±ÙƒÙŠØ² ØªØ­Øª Ø§Ù„Ø¶ØºØ·",
      "Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø§Øª",
      "Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù„ÙŠ ØªØ«Ø¨Øª Ø§Ù„ÙØ·Ù†Ø©",
      "Ø§Ù„Ø³Ø±Ø¹Ø© ÙÙŠ Ø§Ù„ÙÙ‡Ù…",
      "Ø§Ù„ØªÙÙƒÙŠØ± Ø®Ø§Ø±Ø¬ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚",
      "Ø§Ù„ØªØ®Ø·ÙŠØ· Ù„Ù„Ù…Ø³ØªÙ‚Ø¨Ù„",
      "Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø¨Ø¨Ø¹Ø¶",
      "Ù‚Ø±Ø§Ø¡Ø© Ù„ØºØ© Ø§Ù„Ø¬Ø³Ø¯",
      "Ø·Ø±Ø­ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØµØ­",
      "Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡ Ù„Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØµØºÙŠØ±Ø©",
      "Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø°ÙƒÙŠØ© ÙÙŠ Ø§Ù„Ø­ÙˆØ§Ø±",
      "Ø·Ø±ÙŠÙ‚Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙƒÙ„Ù…Ø§Øª",
      "ØªÙˆÙ‚Ø¹ Ø±Ø¯ ÙØ¹Ù„ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„",
      "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Øª Ø¨Ø°ÙƒØ§Ø¡",
      "Ø§Ù„ØªØ¹Ù„Ù… Ù…Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡",
      "Ø·Ø±Ø­ Ø­Ù„ÙˆÙ„ Ø¨Ø¯ÙŠÙ„Ø©",
      "Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§ÙˆØ¶",
      "Ù…Ø¹Ø±ÙØ© Ù…ØªÙ‰ ØªØ³ÙƒØª ÙˆÙ…ØªÙ‰ ØªØ­Ú†ÙŠ",
      "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯Ø¹Ø§Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠØ©",
      "ÙÙ‡Ù… Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ø¨Ø³Ø±Ø¹Ø©"
    ];

    const categories = [
      { tag: "love", topics: loveTopics, modes: ["love","engaged","married","special"] },
      { tag: "funny", topics: funnyTopics, modes: ["love","engaged","married","special"] },
      { tag: "daring", topics: daringTopics, modes: ["love","engaged","married","special"] },
      { tag: "horror", topics: horrorTopics, modes: ["love","engaged","married","special"] },
      { tag: "smart", topics: smartTopics, modes: ["love","engaged","married","special"] }
    ];

    const result = [];
    const textSet = new Set();
    const TARGET_PER_CATEGORY = 500;

    categories.forEach(conf => {
      let count = 0;
      outer: for (let i = 0; i < patterns.length; i++) {
        for (let j = 0; j < conf.topics.length; j++) {
          const text = patterns[i].replace("{topic}", conf.topics[j]);
          const key = text.trim().toLowerCase();
          if (textSet.has(key)) continue;
          textSet.add(key);
          result.push({
            text,
            tags: [conf.tag],
            modes: conf.modes
          });
          count++;
          if (count >= TARGET_PER_CATEGORY) break outer;
        }
      }
    });

    result.forEach((q, idx) => { q.id = idx; });
    return result;
  })();

  const existingQuestionTexts = new Set(allQuestions.map(q => q.text.trim().toLowerCase()));

  const questionsListEl = document.getElementById("questions-list");
  const searchInputEl = document.getElementById("search-input");
  const tagFilterEl = document.getElementById("tag-filter");
  const randomQuestionBtn = document.getElementById("random-question-btn");
  const aiQuestionBtn = document.getElementById("ai-question-btn");
  const counterVisibleEl = document.getElementById("visible-count");
  const counterTotalEl = document.getElementById("total-count");

  const questionDisplayBox = document.getElementById("question-display-box");
  const questionDisplayTextEl = document.getElementById("question-display-text");
  const questionDisplayPlaceholderEl = document.getElementById("question-display-placeholder");
  const questionDisplayCopyBtn = document.getElementById("question-display-copy");

  let lastHighlightedId = null;

  function getCurrentMode() {
    const activeBtn = document.querySelector(".relation-mode-btn.active");
    return activeBtn ? activeBtn.getAttribute("data-mode") : "love";
  }

  function filterQuestions() {
    const mode = getCurrentMode();
    const term = (searchInputEl.value || "").trim().toLowerCase();
    const tag = tagFilterEl.value;

    return allQuestions.filter(q => {
      if (q.modes && !q.modes.includes(mode)) return false;
      if (tag !== "all" && (!q.tags || !q.tags.includes(tag))) return false;
      if (term && !q.text.toLowerCase().includes(term)) return false;
      return true;
    });
  }

  function clearQuestionsList() {
    while (questionsListEl.firstChild) {
      questionsListEl.removeChild(questionsListEl.firstChild);
    }
  }

  function copyToClipboard(text) {
    if (!navigator.clipboard) {
      alert("Ø§Ù„Ù†Ø³Ø® ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­ØŒ Ø§Ù†Ø³Ø® Ø§Ù„Ø³Ø¤Ø§Ù„ ÙŠØ¯ÙˆÙŠØ§Ù‹.");
      return;
    }
    navigator.clipboard.writeText(text).then(() => {});
  }

  function setDisplayQuestion(text) {
    if (!text) {
      questionDisplayTextEl.style.display = "none";
      questionDisplayPlaceholderEl.style.display = "block";
      questionDisplayTextEl.textContent = "";
    } else {
      questionDisplayTextEl.textContent = text;
      questionDisplayTextEl.style.display = "block";
      questionDisplayPlaceholderEl.style.display = "none";
    }
  }

  function clearHighlightedQuestion() {
    if (lastHighlightedId !== null) {
      const prev = questionsListEl.querySelector('.question-item[data-qid="' + lastHighlightedId + '"]');
      if (prev) prev.classList.remove("highlight");
      lastHighlightedId = null;
    }
  }

  function highlightQuestionById(id) {
    clearHighlightedQuestion();
    const el = questionsListEl.querySelector('.question-item[data-qid="' + id + '"]');
    if (el) {
      el.classList.add("highlight");
      lastHighlightedId = id;
      el.scrollIntoView({ behavior: "smooth", block: "center" });
    }
  }

  function renderQuestions() {
    const filtered = filterQuestions();
    clearQuestionsList();

    const tagMap = {
      love: "Ø­Ø¨ / Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ",
      funny: "Ù…Ø¶Ø­Ùƒ / Ø¶Ø­Ùƒ",
      daring: "Ø¬Ø±ÙŠØ¡ Ø¨Ù„Ø·Ù",
      horror: "Ø±Ø¹Ø¨ / ØºÙ…ÙˆØ¶",
      smart: "Ø°ÙƒØ§Ø¡ / ÙØ·Ù†Ø©"
    };

    const modeMap = {
      love: "Ø­Ø¨ / ØªØ¹Ø§Ø±Ù",
      engaged: "Ù…Ø®Ø·ÙˆØ¨ÙŠÙ†",
      married: "Ù…ØªØ²ÙˆØ¬ÙŠÙ†",
      special: "Ø¹Ù„Ø§Ù‚Ø© Ø®Ø§ØµØ©"
    };

    const currentMode = getCurrentMode();

    filtered.forEach(q => {
      const item = document.createElement("div");
      item.className = "question-item";
      item.dataset.qid = String(q.id);

      const topRow = document.createElement("div");
      topRow.className = "question-top-row";

      const textEl = document.createElement("div");
      textEl.className = "question-text";
      textEl.textContent = q.text;

      const actionsEl = document.createElement("div");
      actionsEl.className = "question-actions";

      const btnCopy = document.createElement("button");
      btnCopy.type = "button";
      btnCopy.className = "btn-soft";
      btnCopy.innerHTML = '<span class="btn-icon">ğŸ“‹</span><span>Ù†Ø³Ø® Ø§Ù„Ø³Ø¤Ø§Ù„</span>';
      btnCopy.addEventListener("click", () => copyToClipboard(q.text));

      const btnUse = document.createElement("button");
      btnUse.type = "button";
      btnUse.className = "btn-soft";
      btnUse.innerHTML = '<span class="btn-icon">ğŸ’¬</span><span>Ø§Ø³ØªØ®Ø¯Ù…Ù‡ Ø§Ù„Ø¢Ù†</span>';
      btnUse.addEventListener("click", () => {
        setDisplayQuestion(q.text);
        highlightQuestionById(q.id);
      });

      actionsEl.appendChild(btnCopy);
      actionsEl.appendChild(btnUse);

      topRow.appendChild(textEl);
      topRow.appendChild(actionsEl);

      const metaRow = document.createElement("div");
      metaRow.className = "question-meta-row";

      const tagLabel = document.createElement("div");
      tagLabel.className = "question-tag";
      const tagText = q.tags && q.tags.length ? q.tags[0] : "love";
      tagLabel.textContent = tagMap[tagText] || "Ø­Ø¨ / Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ";

      const modeLabel = document.createElement("div");
      modeLabel.className = "question-mode-label";
      modeLabel.textContent = modeMap[currentMode] || "";

      metaRow.appendChild(tagLabel);
      metaRow.appendChild(modeLabel);

      item.appendChild(topRow);
      item.appendChild(metaRow);

      questionsListEl.appendChild(item);
    });

    counterVisibleEl.textContent = filtered.length.toString();
    counterTotalEl.textContent = allQuestions.length.toString();

    clearHighlightedQuestion();
    setDisplayQuestion("");
  }

  function filterAndRenderQuestions() {
    renderQuestions();
  }

  questionDisplayCopyBtn.addEventListener("click", () => {
    const txtVisible = questionDisplayTextEl.style.display !== "none";
    const txt = txtVisible ? (questionDisplayTextEl.textContent || "").trim() : "";
    if (!txt) return;
    copyToClipboard(txt);
  });

  const aiSpecialPatterns = [
    "Ø³Ø¤Ø§Ù„ Ø°ÙƒÙŠ Ø¹Ù† {topic}: Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ Ù„Ùˆ ÙÙ‡Ù…Ù†Ø§Ù‡ Ø£ÙƒØ«Ø± Ø¹Ù† Ø¨Ø¹Ø¶ Ø±Ø§Ø­ ÙŠØºÙŠÙ‘Ø± Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŸ",
    "ØªØ®ÙŠÙ‘Ù„ Ø¹Ù†Ø¯Ùƒ ÙØ±ØµØ© ØµØ§Ø¯Ù‚Ø© ØªØ­Ú†ÙŠ Ø¹Ù† {topic} Ø¨Ø¯ÙˆÙ† Ù…Ø§ Ø£Ø­Ø¯ ÙŠØ­ÙƒÙ… Ø¹Ù„ÙŠÙƒØŒ Ø´Ù†Ùˆ Ø£ÙˆÙ„ Ø´ÙŠ ØªÙ‚ÙˆÙ„Ù‡ØŸ",
    "Ù„Ùˆ Ø£Ø·Ù„Ø¨ Ù…Ù†Ùƒ ØªÙˆØµÙ Ù†Ø¸Ø±ØªÙƒ Ù„Ù€ {topic} Ø¨Ø«Ù„Ø§Ø« ÙƒÙ„Ù…Ø§Øª ÙÙ‚Ø·ØŒ Ø´Ù†Ùˆ ØªØ®ØªØ§Ø±ØŸ",
    "Ø´Ù†Ùˆ Ø£ÙƒØ«Ø± Ø³Ø¤Ø§Ù„ ØµØ¹Ø¨ ØªØªÙ…Ù†Ø§Ù‡ Ø£Ø·Ø±Ø­Ù‡ Ø¹Ù„ÙŠÙƒ Ø¹Ù† {topic} ÙˆØªØ¬Ø§ÙˆØ¨Ù‡ Ø¨ØµØ±Ø§Ø­Ø©ØŸ",
    "Ù„Ùˆ Ø·ÙÙ„ Ø³Ø£Ù„Ùƒ Ø¹Ù† {topic} Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø±ÙŠØ¦Ø©ØŒ Ø´Ù†Ùˆ Ø§Ù„Ø¬ÙˆØ§Ø¨ Ø§Ù„Ø¨Ø³ÙŠØ· Ø§Ù„Ù„ÙŠ ØªØ¹Ø·ÙŠÙ‡ØŸ",
    "Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ ÙƒØ§Ù† Ø±Ø§Ø­ ÙŠØ³Ù‡Ù‘Ù„ Ø­ÙŠØ§ØªÙƒ Ù„Ùˆ ØªØ¹Ù„Ù…ØªÙ‡ Ø¨Ø¯Ø±ÙŠ Ø¹Ù† {topic}ØŸ",
    "Ù„Ùˆ Ø¨ÙŠÙ†Ø§ Ù„Ø¹Ø¨Ø© Ø£Ø³Ø¦Ù„Ø© Ø¹Ù‚ÙˆÙ„ Ø¹Ù† {topic}ØŒ Ø´Ù†Ùˆ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù„ÙŠ ØªØªØ­Ø¯Ù‘Ø§Ù†ÙŠ Ø£Ø¬Ø§ÙˆØ¨ Ø¹Ù„ÙŠÙ‡ØŸ",
    "Ø´Ù†Ùˆ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨ÙŠÙ† {topic} ÙˆØ¨ÙŠÙ† Ø¥Ø­Ø³Ø§Ø³Ùƒ Ø¨Ø§Ù„Ø£Ù…Ø§Ù† Ø¨Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©ØŸ"
  ];

  const aiSpecialTopics = [
    "Ø§Ù„Ø«Ù‚Ø© Ø§Ù„Ù…ØªØ¨Ø§Ø¯Ù„Ø©",
    "Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ø®ØµÙŠØ©",
    "Ø§Ù„ØºÙŠØ±Ø© Ø§Ù„ØµØ­ÙŠØ©",
    "Ø·Ø±ÙŠÙ‚Ø© Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„",
    "Ù„ØºØ© Ø§Ù„Ø­Ø¨ Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø¹Ù†Ø¯Ùƒ",
    "Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ù…Ø¤Ù„Ù…Ø© Ø§Ù„Ù„ÙŠ Ø¹Ù„Ù…ØªÙƒ",
    "Ù‚Ø¯Ø±ØªÙƒ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ù…Ø­Ø©",
    "ØªÙ‚Ø¨Ù‘Ù„ Ø§Ø®ØªÙ„Ø§Ù Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„",
    "ÙÙ‡Ù… Ù†ÙØ³Ùƒ Ù‚Ø¨Ù„ ÙÙ‡Ù… Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†",
    "Ø§Ù„Ø±Ø§Ø­Ø© Ø§Ù„Ù†ÙØ³ÙŠØ© ÙˆØ§Ù†Øª ÙˆÙŠØ§ÙŠ"
  ];

  function generateAiQuestionText() {
    for (let attempt = 0; attempt < 40; attempt++) {
      const p = aiSpecialPatterns[Math.floor(Math.random() * aiSpecialPatterns.length)];
      const t = aiSpecialTopics[Math.floor(Math.random() * aiSpecialTopics.length)];
      const text = p.replace("{topic}", t);
      const key = text.trim().toLowerCase();
      if (!existingQuestionTexts.has(key)) return text;
    }
    return "Ø³Ø¤Ø§Ù„ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ: Ø´Ù†Ùˆ Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ù„ÙŠ Ù„Ùˆ Ø´Ø§Ø±ÙƒØªÙ‡Ø§ ÙˆÙŠØ§ÙŠ Ø§Ù„ÙŠÙˆÙ… ØªØ­Ø³Ù‡Ø§ Ø±Ø§Ø­ ØªÙ‚Ø±Ù‘Ø¨Ù†Ø§ Ù…Ù† Ø¨Ø¹Ø¶ Ø£ÙƒØ«Ø±ØŸ";
  }

  searchInputEl.addEventListener("input", filterAndRenderQuestions);
  tagFilterEl.addEventListener("change", filterAndRenderQuestions);

  randomQuestionBtn.addEventListener("click", () => {
    const filtered = filterQuestions();
    if (!filtered.length) return;
    const randomIndex = Math.floor(Math.random() * filtered.length);
    const q = filtered[randomIndex];
    setDisplayQuestion(q.text);
    highlightQuestionById(q.id);
  });

  aiQuestionBtn.addEventListener("click", () => {
    const text = generateAiQuestionText();
    setDisplayQuestion(text);
    clearHighlightedQuestion();
  });

  filterAndRenderQuestions();

  // ===== 3) Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø¬Ù„Ø³Ø© Ù…Ù† Ø§Ù„Ø¬Ù‡Ø§Ø² =====
  (function () {
    const musicCard          = document.getElementById("session-music-card");
    if (!musicCard) return;

    const btnSelect          = document.getElementById("session-music-btn");
    const inputFile          = document.getElementById("session-music-input");
    const dropzone           = document.getElementById("music-dropzone");

    const audio              = document.getElementById("session-music-audio");
    const metaBox            = document.getElementById("music-meta");
    const titleEl            = document.getElementById("music-title");
    const sizeEl             = document.getElementById("music-filesize");

    const controlsBox        = document.getElementById("music-controls");
    const btnPlayPause       = document.getElementById("music-play-pause");
    const btnRestart         = document.getElementById("music-restart");
    const btnLoop            = document.getElementById("music-loop");
    const btnMute            = document.getElementById("music-mute");

    const progressInput      = document.getElementById("music-progress");
    const volumeInput        = document.getElementById("music-volume");
    const currentTimeEl      = document.getElementById("music-current-time");
    const durationEl         = document.getElementById("music-duration");

    const autoplayToggle     = document.getElementById("music-autoplay-toggle");

    let currentObjectUrl     = null;
    let isUserSeeking        = false;
    let lastVolumeBeforeMute = 0.8;

    audio.volume = parseFloat(volumeInput.value) || 0.8;

    function formatTime(seconds) {
      if (isNaN(seconds)) return "0:00";
      const m = Math.floor(seconds / 60);
      const s = Math.floor(seconds % 60);
      return `${m}:${s < 10 ? "0" + s : s}`;
    }

    function formatFileSize(bytes) {
      if (!bytes && bytes !== 0) return "";
      const kb = bytes / 1024;
      if (kb < 1024) return `${kb.toFixed(1)} KB`;
      const mb = kb / 1024;
      return `${mb.toFixed(2)} MB`;
    }

    function enableControls() {
      btnPlayPause.disabled = false;
      btnRestart.disabled   = false;
      btnLoop.disabled      = false;
      controlsBox.style.display = "flex";
    }

    function updatePlayPauseIcon() {
      btnPlayPause.textContent = audio.paused ? "â–¶" : "â¸";
    }

    function updateMuteIcon() {
      btnMute.textContent = (audio.muted || audio.volume === 0) ? "ğŸ”‡" : "ğŸ”Š";
    }

    function loadAudioFile(file) {
      if (!file) return;

      if (currentObjectUrl) {
        URL.revokeObjectURL(currentObjectUrl);
        currentObjectUrl = null;
      }

      currentObjectUrl = URL.createObjectURL(file);
      audio.src = currentObjectUrl;

      titleEl.textContent = file.name;
      sizeEl.textContent  = formatFileSize(file.size);
      metaBox.style.display = "block";

      audio.onloadedmetadata = () => {
        durationEl.textContent = formatTime(audio.duration);
        progressInput.value    = 0;
        currentTimeEl.textContent = "0:00";
        enableControls();

        if (autoplayToggle.checked) {
          audio.play().then(updatePlayPauseIcon).catch(() => {});
        } else {
          updatePlayPauseIcon();
        }
      };
    }

    btnSelect.addEventListener("click", () => {
      inputFile.click();
    });

    inputFile.addEventListener("change", () => {
      const file = inputFile.files && inputFile.files[0];
      if (!file) return;
      loadAudioFile(file);
    });

    ["dragenter", "dragover"].forEach(eventName => {
      dropzone.addEventListener(eventName, (e) => {
        e.preventDefault();
        e.stopPropagation();
        dropzone.classList.add("dragover");
      });
    });

    ["dragleave", "drop"].forEach(eventName => {
      dropzone.addEventListener(eventName, (e) => {
        e.preventDefault();
        e.stopPropagation();
        dropzone.classList.remove("dragover");
      });
    });

    dropzone.addEventListener("drop", (e) => {
      const dt = e.dataTransfer;
      if (!dt || !dt.files || !dt.files.length) return;
      const file = dt.files[0];
      if (file && file.type.startsWith("audio/")) {
        loadAudioFile(file);
      }
    });

    btnPlayPause.addEventListener("click", () => {
      if (audio.paused) {
        audio.play().catch(() => {});
      } else {
        audio.pause();
      }
    });

    audio.addEventListener("play", updatePlayPauseIcon);
    audio.addEventListener("pause", updatePlayPauseIcon);

    btnRestart.addEventListener("click", () => {
      audio.currentTime = 0;
      if (audio.paused && autoplayToggle.checked) {
        audio.play().catch(() => {});
      }
    });

    btnLoop.addEventListener("click", () => {
      const active = btnLoop.classList.toggle("active");
      audio.loop = active;
    });

    audio.addEventListener("timeupdate", () => {
      if (isUserSeeking) return;
      const percent = (audio.currentTime / audio.duration) * 100 || 0;
      progressInput.value = percent;
      currentTimeEl.textContent = formatTime(audio.currentTime);
    });

    progressInput.addEventListener("input", () => {
      isUserSeeking = true;
    });

    progressInput.addEventListener("change", () => {
      const percent = parseFloat(progressInput.value) || 0;
      audio.currentTime = (percent / 100) * (audio.duration || 0);
      isUserSeeking = false;
    });

    volumeInput.addEventListener("input", () => {
      const vol = parseFloat(volumeInput.value);
      audio.volume = vol;
      if (vol > 0) {
        lastVolumeBeforeMute = vol;
        audio.muted = false;
      } else {
        audio.muted = true;
      }
      updateMuteIcon();
    });

    btnMute.addEventListener("click", () => {
      if (audio.muted || audio.volume === 0) {
        audio.muted = false;
        audio.volume = lastVolumeBeforeMute || 0.8;
        volumeInput.value = audio.volume;
      } else {
        audio.muted = true;
        lastVolumeBeforeMute = audio.volume;
        audio.volume = 0;
        volumeInput.value = 0;
      }
      updateMuteIcon();
    });

    const AUTOPLAY_KEY = "love_session_music_autoplay";
    const savedAutoplay = localStorage.getItem(AUTOPLAY_KEY);
    if (savedAutoplay === "true") {
      autoplayToggle.checked = true;
    }

    autoplayToggle.addEventListener("change", () => {
      localStorage.setItem(AUTOPLAY_KEY, autoplayToggle.checked ? "true" : "false");
    });

    updateMuteIcon();
  })();

  // ===== 4) LoveBoard =====
  (function () {
    const loveButtons = document.querySelectorAll(".loveboard-btn");

    function sampleRandom(array, count) {
      const copy = array.slice();
      const result = [];
      count = Math.min(count, copy.length);
      for (let i = 0; i < count; i++) {
        const idx = Math.floor(Math.random() * copy.length);
        result.push(copy.splice(idx, 1)[0]);
      }
      return result;
    }

    // Ø°ÙƒØ±ÙŠØ§ØªÙƒÙ… Ø§Ù„Ù…ÙØ¶Ù„Ø©
    const memoriesPage = document.getElementById("memories-page");
    const memoriesBackBtn = document.getElementById("memories-back-btn");
    const memoryInputs = memoriesPage.querySelectorAll("textarea[data-index]");
    const MEM_KEY = "loveboard_memories";

    function loadMemories() {
      const raw = localStorage.getItem(MEM_KEY);
      let arr = [];
      if (raw) {
        try { arr = JSON.parse(raw); } catch (e) {}
      }
      memoryInputs.forEach((ta, idx) => {
        ta.value = arr[idx] || "";
      });
    }

    function saveMemories() {
      const arr = [];
      memoryInputs.forEach((ta, idx) => {
        arr[idx] = ta.value || "";
      });
      localStorage.setItem(MEM_KEY, JSON.stringify(arr));
    }

    memoryInputs.forEach(ta => ta.addEventListener("input", saveMemories));
    memoriesBackBtn.addEventListener("click", () => {
      memoriesPage.classList.remove("open");
    });
    loadMemories();

    // Ø±Ø³Ø§Ø¦Ù„ Ø­Ø¨ Ù‚ØµÙŠØ±Ø©
    const shortMessagesModal = document.getElementById("short-messages-modal");
    const shortMessagesList = document.getElementById("short-messages-list");
    const refreshShortMessagesBtn = document.getElementById("refresh-short-messages");
    const shortMessagesClose = document.getElementById("short-messages-close");

    const SHORT_MESSAGES = [
      "Ø£Ø­Ø¨ Ø´Ø¹ÙˆØ± Ø§Ù„Ø·Ù…Ø£Ù†ÙŠÙ†Ø© Ø§Ù„Ù„ÙŠ ÙŠØ¬ÙŠ Ù…Ù† ØµÙˆØªÙƒ.",
      "ÙƒÙ„ Ù…Ø§ Ø£Ø´ÙˆÙ Ø§Ø³Ù…Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©ØŒ ÙŠÙˆÙ…ÙŠ ÙŠØªØ­Ø³Ù†.",
      "Ù‚Ø±Ø¨Ùƒ Ù…Ùˆ Ø¨Ø³ ÙŠØ·Ù…Ù† Ù‚Ù„Ø¨ÙŠØŒ ÙŠØ·Ù…Ù† Ø±ÙˆØ­ÙŠ ÙƒÙ„Ù‡Ø§.",
      "Ø£Ø­Ø³ Ø§Ù„Ø¯Ù†ÙŠØ§ Ø£Ø¨Ø³Ø· ÙˆØ£Ù„Ø·Ù Ù…Ù† ØªÙƒÙˆÙ† ÙˆÙŠØ§ÙŠ.",
      "ÙˆØ¬ÙˆØ¯Ùƒ Ù‡Ùˆ Ø£Ø­Ø³Ù† Ù‚Ø±Ø§Ø± ØµØ§Ø± Ø¨Ø­ÙŠØ§ØªÙŠ.",
      "Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ ÙŠÙƒÙÙŠÙ†ÙŠ Ù…Ù†Ùƒ ÙƒÙ„Ù…Ø© Ø¨Ø³ÙŠØ·Ø©ØŒ Ø¨Ø³ ØªØºÙŠØ± Ù…Ø²Ø§Ø¬ ÙŠÙˆÙ… ÙƒØ§Ù…Ù„.",
      "Ø£Ø­Ø¨ Ø·Ø±ÙŠÙ‚Ø© Ø¶Ø­ÙƒØªÙƒ Ø§Ù„Ù„ÙŠ ØªØ®Ù„ÙŠ ÙƒÙ„Ø´ÙŠ Ø­ÙˆØ§Ù„ÙŠÙ†Ø§ ÙŠÙ‡Ø¯Ø£.",
      "Ù„Ù…Ø§ Ø£ÙƒÙˆÙ† ÙˆÙŠØ§Ùƒ Ø£Ø­Ø³ Ø¥Ù†ÙŠ Ø¨Ù…ÙƒØ§Ù†ÙŠ Ø§Ù„ØµØ­.",
      "ÙƒÙ„ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØµØºÙŠØ±Ø© Ø§Ù„Ù„ÙŠ ØªØ³ÙˆÙŠÙ‡Ø§ ØªØ¨Ù‚Ù‰ Ù…Ø¹Ù„Ù‚Ø© Ø¨Ù‚Ù„Ø¨ÙŠ.",
      "Ø£Ø«Ù‚ Ø¨ÙŠÙƒ Ø£ÙƒØ«Ø± Ù…Ù† Ø«Ù‚ØªÙŠ Ø¨Ø²Ù…Ù† ÙŠÙ…Ø± Ø¨Ø¯ÙˆÙ†Ùƒ."
    ];

    function renderShortMessages() {
      const msgs = sampleRandom(SHORT_MESSAGES, 5);
      shortMessagesList.innerHTML = "";
      msgs.forEach((msg) => {
        const item = document.createElement("div");
        item.className = "short-message-item";
        item.textContent = msg;
        shortMessagesList.appendChild(item);
      });
    }

    function openShortMessages() {
      renderShortMessages();
      shortMessagesModal.classList.add("open");
    }

    refreshShortMessagesBtn.addEventListener("click", renderShortMessages);
    shortMessagesClose.addEventListener("click", () => {
      shortMessagesModal.classList.remove("open");
    });
    shortMessagesModal.addEventListener("click", (e) => {
      if (e.target === shortMessagesModal) {
        shortMessagesModal.classList.remove("open");
      }
    });

    // Ø£Ù‡Ø¯Ø§Ù Ù…Ø´ØªØ±ÙƒØ©
    const goalsModal = document.getElementById("goals-modal");
    const goalsList = document.getElementById("goals-list");
    const goalsClose = document.getElementById("goals-close");
    const GOALS_KEY = "loveboard_goals";

    function loadGoals() {
      const raw = localStorage.getItem(GOALS_KEY);
      let arr = [];
      if (raw) {
        try { arr = JSON.parse(raw); } catch (e) {}
      }
      const inputs = goalsList.querySelectorAll("input[data-index]");
      inputs.forEach(inp => {
        const idx = parseInt(inp.dataset.index, 10);
        inp.value = arr[idx] || "";
      });
    }

    function saveGoals() {
      const inputs = goalsList.querySelectorAll("input[data-index]");
      const arr = [];
      inputs.forEach(inp => {
        const idx = parseInt(inp.dataset.index, 10);
        arr[idx] = inp.value || "";
      });
      localStorage.setItem(GOALS_KEY, JSON.stringify(arr));
    }

    goalsList.querySelectorAll("input[data-index]").forEach(inp => {
      inp.addEventListener("input", saveGoals);
    });

    goalsClose.addEventListener("click", () => {
      goalsModal.classList.remove("open");
    });
    goalsModal.addEventListener("click", (e) => {
      if (e.target === goalsModal) {
        goalsModal.classList.remove("open");
      }
    });
    loadGoals();

    // Ù„Ø¹Ø¨Ø© Ø­Ø¨ Ø³Ø±ÙŠØ¹Ø©
    const fastGameModal = document.getElementById("fast-game-modal");
    const fastGameList = document.getElementById("fast-game-list");
    const refreshFastGameBtn = document.getElementById("refresh-fast-game");
    const fastGameClose = document.getElementById("fast-game-close");

    const FAST_GAME_PROMPTS = [
      "Ø§Ø®ØªØ§Ø± ÙˆØ§Ø­Ø¯Ø©: Ù†Ø´Ø§Ø±Ùƒ Ø§Ù„ÙŠÙˆÙ… Ø³Ø± Ù‚Ø¯ÙŠÙ…ØŒ Ù„Ùˆ Ù†Ø­Ú†ÙŠ Ø¹Ù† Ø®ÙˆÙ Ø­Ø§Ù„ÙŠØŸ",
      "Ø§Ø³Ø£Ù„ Ø´Ø±ÙŠÙƒÙƒ Ø¹Ù† Ù…ÙˆÙ‚Ù Ø¨Ø³ÙŠØ· Ø®Ù„Ø§Ù‡ ÙŠØ­Ø¨Ùƒ Ø£ÙƒØ«Ø± Ø¨Ø¯ÙˆÙ† Ù…Ø§ ÙŠÙ‚ÙˆÙ„ Ù„Ùƒ ÙˆÙ‚ØªÙ‡Ø§.",
      "ÙƒÙ„ ÙˆØ§Ø­Ø¯ ÙŠØ®ØªØ§Ø± Ø¹Ø§Ø¯Ø© Ø­Ù„ÙˆØ© Ø¨Ø§Ù„Ø«Ø§Ù†ÙŠ ÙˆÙŠØªØ¹Ù‡Ø¯ ÙŠØ³Ø§Ø¹Ø¯Ù‡ ÙŠØ­Ø§ÙØ¸ Ø¹Ù„ÙŠÙ‡Ø§.",
      "Ø®Ù„Ø§Ù„ 60 Ø«Ø§Ù†ÙŠØ©ØŒ Ù‚ÙˆÙ„ Ø£ÙƒØ¨Ø± Ø¹Ø¯Ø¯ ØªÙ‚Ø¯Ø± Ø¹Ù„ÙŠÙ‡ Ù…Ù† Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ Ø§Ù„Ù„ÙŠ ØªØ´ÙƒØ± Ø´Ø±ÙŠÙƒÙƒ Ø¹Ù„ÙŠÙ‡Ø§.",
      "ÙƒÙ„ ÙˆØ§Ø­Ø¯ ÙŠØ­Ú†ÙŠ Ø¹Ù† Ù…Ø´Ù‡Ø¯ ÙŠØªÙ…Ù†Ù‰ ÙŠØ¹ÙŠØ´ÙˆÙ‡ Ø³ÙˆØ§ Ø¨Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ÙˆÙƒØ£Ù†Ù‡ ØµØ§Ø±.",
      "Ø§Ø®ØªØ§Ø±ÙˆØ§ Ø°ÙƒØ±Ù‰ Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ£Ø¹ÙŠØ¯ÙˆØ§ ØªÙ…Ø«ÙŠÙ„Ù‡Ø§ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¶Ø­ÙƒØ©.",
      "ÙƒÙ„ ÙˆØ§Ø­Ø¯ ÙŠÙƒØªØ¨ Ø¬Ù…Ù„Ø© Ø­Ø¨ Ù‚ØµÙŠØ±Ø© Ù„Ù„Ø«Ø§Ù†ÙŠ Ø¨Ø¯ÙˆÙ† Ù…Ø§ ÙŠØ´ÙˆÙÙ‡Ø§ØŒ ÙˆØ¨Ø¹Ø¯ÙŠÙ† ØªÙ‚Ø±ÙˆÙ‡Ø§ Ø¨ØµÙˆØª Ø¹Ø§Ù„ÙŠ.",
      "Ø¬Ø§ÙˆØ¨ Ø¨ØµØ±Ø§Ø­Ø©: Ø´Ù†Ùˆ Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ ØªØ­Ø¨ Ø£ØºÙŠØ±Ù‡ Ø¨Ø·Ø±ÙŠÙ‚Ø© ØªÙˆØ§ØµÙ„Ù†Ø§ØŸ",
      "ØªØ­Ø¯ÙŠ: Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ† ØªØ­Ú†ÙŠ Ø¨ÙŠÙ‡Ø§ ÙÙ‚Ø· Ø¹Ù† Ø§Ù„Ù„Ø­Ø¸Ø§Øª Ø§Ù„Ù„ÙŠ ÙƒÙ†Øª Ø¨ÙŠÙ‡Ø§ Ø³Ù†Ø¯ Ù„Ù„Ø«Ø§Ù†ÙŠ.",
      "Ø§Ø®ØªØ§Ø±ÙˆØ§ Ø£ØºÙ†ÙŠØ© Ù…Ø¹ÙŠÙ‘Ù†Ø© ÙˆØ®Ù„ÙˆÙ‡Ø§ Ø¹Ù†ÙˆØ§Ù† Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ… Ø¨ÙŠÙ†Ø§ØªÙƒÙ…ØŒ ÙˆÙ„ÙŠØ´ Ø§Ø®ØªØ±ØªÙˆÙ‡Ø§ØŸ"
    ];

    function renderFastGame() {
      const items = sampleRandom(FAST_GAME_PROMPTS, 5);
      fastGameList.innerHTML = "";
      items.forEach((text) => {
        const div = document.createElement("div");
        div.className = "short-message-item";
        div.textContent = text;
        fastGameList.appendChild(div);
      });
    }

    function openFastGame() {
      renderFastGame();
      fastGameModal.classList.add("open");
    }

    refreshFastGameBtn.addEventListener("click", renderFastGame);
    fastGameClose.addEventListener("click", () => {
      fastGameModal.classList.remove("open");
    });
    fastGameModal.addEventListener("click", (e) => {
      if (e.target === fastGameModal) {
        fastGameModal.classList.remove("open");
      }
    });

    loveButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const board = btn.getAttribute("data-board");
        if (board === "memories") {
          memoriesPage.classList.add("open");
        } else if (board === "messages") {
          openShortMessages();
        } else if (board === "goals") {
          loadGoals();
          goalsModal.classList.add("open");
        } else if (board === "fast-game") {
          openFastGame();
        }
      });
    });
  })();

  // ===== 5) ØªØ£ÙƒÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ =====
  (function () {
    const logoutBtn = document.getElementById("logout-btn");
    const modal = document.getElementById("logout-modal");
    const cancelBtn = document.getElementById("logout-cancel");
    const confirmBtn = document.getElementById("logout-confirm");

    logoutBtn.addEventListener("click", () => {
      modal.classList.add("open");
    });

    cancelBtn.addEventListener("click", () => {
      modal.classList.remove("open");
    });

    confirmBtn.addEventListener("click", () => {
      localStorage.clear();
      location.reload();
    });

    modal.addEventListener("click", (e) => {
      if (e.target === modal) {
        modal.classList.remove("open");
      }
    });
  })();

  // ===== 6) ÙˆØ¶Ø¹ Ù†Ù‡Ø§Ø±ÙŠ/Ù„ÙŠÙ„ÙŠ + ØªØ®ØµÙŠØµ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø«ÙŠÙ… + Ø²Ø± Ø§Ù„Ø¬Ù„Ø³Ø© =====
  (function () {
    const root = document.documentElement;
    const rootStyle = root.style;

    const dayNightBtn = document.getElementById("daynight-btn");
    const dayNightIcon = document.getElementById("daynight-icon");
    const dayNightLabel = document.getElementById("daynight-label");

    const themeBtn = document.getElementById("theme-btn");
    const themeModal = document.getElementById("theme-modal");
    const themeClose = document.getElementById("theme-close");
    const presetsGrid = document.getElementById("theme-presets-grid");
    const accentInput = document.getElementById("accent-color-input");
    const accent2Input = document.getElementById("accent2-color-input");
    const randomRgbBtn = document.getElementById("theme-random-rgb");
    const sessionBtnSelect = document.getElementById("session-btn-theme-select");
    const startBtn = document.getElementById("start-session-btn");

    const DAYNIGHT_KEY = "love_app_daynight_v1";
    const THEME_KEY = "love_app_theme_v1";

    const THEMES = {
      "romantic-night": { accent: "#ff4a8d", accent2: "#ffb84a" },
      "soft-rose":      { accent: "#ff7ea3", accent2: "#ffe3b8" },
      "ocean-love":     { accent: "#4ad2ff", accent2: "#7effc8" },
      "golden-warm":    { accent: "#ffb84a", accent2: "#ff7e5f" },
      "midnight-blue":  { accent: "#6a8bff", accent2: "#c2e9ff" },
      "emerald-heart":  { accent: "#41f5b0", accent2: "#f9ffb5" }
    };

    const SESSION_BTN_PRESETS = [
      "linear-gradient(90deg,#ff9f4a,#ff4a8d,#4afff5)",
      "linear-gradient(90deg,#9b5bff,#ff4a8d,#ffc371)",
      "linear-gradient(90deg,#ff6a88,#ff99ac,#ffdba6)",
      "linear-gradient(90deg,#4ad2ff,#6a8bff,#c2e9ff)",
      "linear-gradient(90deg,#b31237,#e52d27,#ff9f4a)",
      "linear-gradient(90deg,#ff9966,#ff5e62,#f2d7d9)",
      "linear-gradient(90deg,#ffb75e,#ed8f03,#ff4a4a)",
      "linear-gradient(90deg,#f857a6,#ff5858,#ffe29f)",
      "linear-gradient(90deg,#41295a,#2f0743,#ff4a8d)",
      "linear-gradient(90deg,#654ea3,#eaafc8,#ffe3b8)",
      "linear-gradient(90deg,#c31432,#240b36,#ff758c)",
      "linear-gradient(90deg,#f7b733,#fc4a1a,#f2fcfe)",
      "linear-gradient(90deg,#f953c6,#b91d73,#f9d976)",
      "linear-gradient(90deg,#f0c27b,#4b1248,#ff9a9e)",
      "linear-gradient(90deg,#ff512f,#dd2476,#ffd3a5)",
      "linear-gradient(90deg,#e65c00,#f9d423,#ff4e50)",
      "linear-gradient(90deg,#ffafbd,#ffc3a0,#ff7e5f)",
      "linear-gradient(90deg,#a80077,#66ff00,#fbd786)",
      "linear-gradient(90deg,#283c86,#45a247,#f9f586)",
      "linear-gradient(90deg,#141e30,#243b55,#ff4a8d)",
      "linear-gradient(90deg,#2b5876,#4e4376,#ffb88c)",
      "linear-gradient(90deg,#654ea3,#eaafc8,#ffe3e3)",
      "linear-gradient(90deg,#ee0979,#ff6a00,#fceabb)",
      "linear-gradient(90deg,#ff7e5f,#feb47b,#fdfcfb)",
      "linear-gradient(90deg,#00c6ff,#0072ff,#ffe29f)",
      "linear-gradient(90deg,#f53844,#42378f,#f5e6e8)",
      "linear-gradient(90deg,#e53935,#e35d5b,#ffc3a0)",
      "linear-gradient(90deg,#41295a,#2f0743,#f3904f)",
      "linear-gradient(90deg,#603813,#b29f94,#ff9a9e)",
      "linear-gradient(90deg,#2193b0,#6dd5ed,#fceabb)"
    ];

    function updateDayNightButton(mode) {
      if (mode === "light") {
        dayNightIcon.textContent = "ğŸŒ™";
        dayNightLabel.textContent = "ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ";
      } else {
        dayNightIcon.textContent = "â˜€ï¸";
        dayNightLabel.textContent = "ÙˆØ¶Ø¹ Ù†Ù‡Ø§Ø±ÙŠ";
      }
    }

    function applyDayNight(mode) {
      const value = mode === "light" ? "light" : "dark";
      root.setAttribute("data-theme", value);
      updateDayNightButton(value);
      localStorage.setItem(DAYNIGHT_KEY, value);
    }

    const savedMode = localStorage.getItem(DAYNIGHT_KEY);
    applyDayNight(savedMode || "dark");

    dayNightBtn.addEventListener("click", () => {
      const current = root.getAttribute("data-theme") || "dark";
      const next = current === "dark" ? "light" : "dark";
      applyDayNight(next);
    });

    let themeState;
    try {
      const raw = localStorage.getItem(THEME_KEY);
      themeState = raw ? JSON.parse(raw) : {};
    } catch (e) {
      themeState = {};
    }

    function applyThemeState(state) {
      if (!state) return;
      if (state.accent) rootStyle.setProperty("--accent", state.accent);
      if (state.accent2) rootStyle.setProperty("--accent-2", state.accent2);
      if (typeof state.sessionBtnPresetIndex === "number" &&
          SESSION_BTN_PRESETS[state.sessionBtnPresetIndex]) {
        startBtn.style.backgroundImage = SESSION_BTN_PRESETS[state.sessionBtnPresetIndex];
        sessionBtnSelect.value = String(state.sessionBtnPresetIndex);
      }
    }

    function saveThemeState() {
      localStorage.setItem(THEME_KEY, JSON.stringify(themeState || {}));
    }

    applyThemeState(themeState);

    themeBtn.addEventListener("click", () => {
      accentInput.value  = (themeState && themeState.accent)  || "#ff4a8d";
      accent2Input.value = (themeState && themeState.accent2) || "#ffb84a";
      themeModal.classList.add("open");
    });

    themeClose.addEventListener("click", () => {
      themeModal.classList.remove("open");
    });

    themeModal.addEventListener("click", (e) => {
      if (e.target === themeModal) themeModal.classList.remove("open");
    });

    presetsGrid.addEventListener("click", (e) => {
      const btn = e.target.closest(".theme-preset");
      if (!btn) return;
      const id = btn.getAttribute("data-theme");
      const conf = THEMES[id];
      if (!conf) return;
      themeState = Object.assign({}, themeState || {}, conf);
      applyThemeState(themeState);
      saveThemeState();
    });

    accentInput.addEventListener("input", () => {
      const v = accentInput.value;
      themeState = themeState || {};
      themeState.accent = v;
      rootStyle.setProperty("--accent", v);
      saveThemeState();
    });

    accent2Input.addEventListener("input", () => {
      const v = accent2Input.value;
      themeState = themeState || {};
      themeState.accent2 = v;
      rootStyle.setProperty("--accent-2", v);
      saveThemeState();
    });

    randomRgbBtn.addEventListener("click", () => {
      function randColor() {
        const r = Math.floor(Math.random() * 256);
        const g = Math.floor(Math.random() * 256);
        const b = Math.floor(Math.random() * 256);
        return "#" + [r, g, b].map(x => x.toString(16).padStart(2, "0")).join("");
      }
      const c1 = randColor();
      const c2 = randColor();
      accentInput.value = c1;
      accent2Input.value = c2;
      themeState = themeState || {};
      themeState.accent = c1;
      themeState.accent2 = c2;
      rootStyle.setProperty("--accent", c1);
      rootStyle.setProperty("--accent-2", c2);
      saveThemeState();
    });

    function applySessionBtnPresetIndex(idx) {
      if (!SESSION_BTN_PRESETS[idx]) return;
      startBtn.style.backgroundImage = SESSION_BTN_PRESETS[idx];
      themeState = themeState || {};
      themeState.sessionBtnPresetIndex = idx;
      saveThemeState();
    }

    sessionBtnSelect.addEventListener("change", () => {
      const idx = parseInt(sessionBtnSelect.value, 10);
      if (isNaN(idx)) return;
      applySessionBtnPresetIndex(idx);
    });

    if (typeof (themeState && themeState.sessionBtnPresetIndex) !== "number") {
      applySessionBtnPresetIndex(0);
      sessionBtnSelect.value = "0";
    }
  })();

  // ===== 7) Ù…Ø¤Ù‚Øª Ø§Ù„Ø¬Ù„Ø³Ø© =====
  (function () {
    const startBtn = document.getElementById("start-session-btn");
    const modal = document.getElementById("session-timer-modal");
    const range = document.getElementById("session-duration-range");
    const label = document.getElementById("session-duration-label");
    const quickBtns = document.querySelectorAll("[data-session-min]");
    const cancelBtn = document.getElementById("session-timer-cancel");
    const startTimerBtn = document.getElementById("session-timer-start");
    const banner = document.getElementById("session-timer-banner");
    const textEl = document.getElementById("session-timer-text");
    const stopBtn = document.getElementById("session-timer-stop");

    let intervalId = null;
    let remainingSeconds = 0;

    function openModal() {
      modal.classList.add("open");
    }

    function closeModal() {
      modal.classList.remove("open");
    }

    function updateRangeLabel() {
      label.textContent = range.value;
    }

    function formatTime(sec) {
      if (isNaN(sec) || sec < 0) return "0:00";
      const m = Math.floor(sec / 60);
      const s = sec % 60;
      return `${m}:${s < 10 ? "0" + s : s}`;
    }

    function updateBanner() {
      if (remainingSeconds <= 0) {
        textEl.textContent = "Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­. Ø§Ø³ØªÙ…Ø±ÙˆØ§ ÙÙ‚Ø· Ø¥Ø°Ø§ Ø£Ù†ØªÙ… Ø­Ø§Ø¨ÙŠÙ†.";
        return;
      }
      textEl.textContent = "Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ø¬Ù„Ø³Ø©: " + formatTime(remainingSeconds);
    }

    function startSessionTimer() {
      if (intervalId) clearInterval(intervalId);
      remainingSeconds = parseInt(range.value, 10) * 60;
      if (isNaN(remainingSeconds) || remainingSeconds <= 0) return;
      banner.style.display = "flex";
      updateBanner();
      intervalId = setInterval(() => {
        remainingSeconds -= 1;
        if (remainingSeconds <= 0) {
          remainingSeconds = 0;
          clearInterval(intervalId);
          intervalId = null;
        }
        updateBanner();
      }, 1000);
    }

    startBtn.addEventListener("click", openModal);

    cancelBtn.addEventListener("click", () => {
      closeModal();
    });

    startTimerBtn.addEventListener("click", () => {
      startSessionTimer();
      closeModal();
    });

    stopBtn.addEventListener("click", () => {
      if (intervalId) {
        clearInterval(intervalId);
        intervalId = null;
      }
      banner.style.display = "none";
    });

    modal.addEventListener("click", (e) => {
      if (e.target === modal) closeModal();
    });

    quickBtns.forEach(btn => {
      btn.addEventListener("click", () => {
        const v = btn.getAttribute("data-session-min");
        range.value = v;
        updateRangeLabel();
      });
    });

    updateRangeLabel();
  })();
</script>
</body>
</html>
