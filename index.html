<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Ø¬Ù„Ø³Ø© Ø­Ø¨ | Love Session</title>
  <style>
    :root {
      --bg-main: radial-gradient(circle at top left, #0f0c29, #302b63, #24243e);
      --glass-bg: rgba(255, 255, 255, 0.05);
      --glass-border: rgba(255, 255, 255, 0.1);
      --text-main: #fff;
      --text-muted: #aab2bd;
      --accent: #ff4b8d; 
      --accent-glow: rgba(255, 75, 141, 0.4);
      --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }

    body {
      margin: 0; min-height: 100vh; font-family: var(--font-main);
      background: var(--bg-main); color: var(--text-main);
      overflow-x: hidden;
    }

    /* Ø´Ø§Ø´Ø§Øª Ø§Ù„ØªÙ†Ù‚Ù„ (Login vs App) */
    .view-section {
      display: none;
      min-height: 100vh;
      animation: fadeIn 0.5s ease;
    }
    .view-section.active { display: block; }

    /* ================= Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ================= */
    .login-container {
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      height: 100vh; padding: 20px; text-align: center;
    }
    
    .login-box {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      padding: 3rem 2rem;
      border-radius: 24px;
      width: 100%; max-width: 400px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    }

    .login-title { font-size: 2rem; margin-bottom: 0.5rem; font-weight: 800; }
    .login-subtitle { color: var(--text-muted); margin-bottom: 2rem; font-size: 0.9rem; }

    .input-group { margin-bottom: 1.2rem; text-align: right; }
    .input-group label { display: block; margin-bottom: 5px; font-size: 0.85rem; color: var(--text-muted); }
    .custom-input {
      width: 100%; padding: 12px 15px; border-radius: 12px;
      background: rgba(0,0,0,0.3); border: 1px solid var(--glass-border);
      color: #fff; font-size: 1rem; transition: 0.3s;
    }
    .custom-input:focus { border-color: var(--accent); box-shadow: 0 0 10px var(--accent-glow); }

    .btn-login {
      width: 100%; padding: 14px; border-radius: 12px; border: none;
      background: linear-gradient(135deg, var(--accent), #ff9068);
      color: white; font-weight: bold; font-size: 1.1rem; cursor: pointer;
      margin-top: 1rem; transition: transform 0.2s;
    }
    .btn-login:active { transform: scale(0.98); }

    /* ================= Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ================= */
    .app-shell { max-width: 800px; margin: 0 auto; padding: 20px; }
    
    .header-bar {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid var(--glass-border);
    }
    .user-welcome { font-weight: bold; font-size: 1.1rem; }
    .btn-logout {
      background: rgba(255, 50, 50, 0.2); border: 1px solid rgba(255, 50, 50, 0.3);
      color: #ffcccc; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 0.8rem;
    }

    /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ */
    .question-card {
      background: var(--glass-bg); border: 1px solid var(--glass-border);
      border-radius: 24px; padding: 2rem; text-align: center;
      min-height: 250px; display: flex; flex-direction: column; justify-content: center; align-items: center;
      margin-bottom: 2rem; position: relative; overflow: hidden;
    }
    .question-category {
      position: absolute; top: 15px; left: 50%; transform: translateX(-50%);
      background: rgba(0,0,0,0.3); padding: 4px 12px; border-radius: 15px; font-size: 0.75rem; color: var(--accent);
    }
    .q-text { font-size: 1.4rem; line-height: 1.6; font-weight: 600; margin: 1rem 0; direction: rtl; }
    
    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
    .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .btn-action {
      padding: 15px; border-radius: 16px; border: none; cursor: pointer;
      font-weight: bold; font-size: 1rem; color: white; transition: 0.3s;
    }
    .btn-main { background: linear-gradient(135deg, #667eea, #764ba2); box-shadow: 0 4px 15px rgba(118, 75, 162, 0.4); }
    .btn-sec { background: rgba(255,255,255,0.1); border: 1px solid var(--glass-border); }

    /* Ø§Ù„Ø¹Ø¯Ø§Ø¯ */
    .counter-badge {
      text-align: center; margin-top: 1rem; font-size: 0.8rem; opacity: 0.6;
    }

    /* Toast */
    .toast {
      position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%) translateY(50px);
      background: #333; color: #fff; padding: 12px 24px; border-radius: 30px;
      opacity: 0; transition: 0.4s; pointer-events: none; z-index: 1000;
    }
    .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

    @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
    
    /* Typing Cursor */
    .cursor::after { content: '|'; animation: blink 1s infinite; color: var(--accent); }
    @keyframes blink { 50% { opacity: 0; } }

  </style>
</head>
<body>

  <section id="login-view" class="view-section active">
    <div class="login-container">
      <div class="login-box">
        <div class="login-title">Ø¬Ù„Ø³Ø© Ø­Ø¨ â¤ï¸</div>
        <div class="login-subtitle">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ø¨Ø¯Ø¡ Ø±Ø­Ù„Ø© Ù…Ù† 10,000 Ø³Ø¤Ø§Ù„</div>
        
        <div class="input-group">
          <label>Ø§Ø³Ù…Ùƒ (Ø§Ù„Ø´Ø±ÙŠÙƒ Ø§Ù„Ø£ÙˆÙ„)</label>
          <input type="text" id="p1-name" class="custom-input" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¢Ø¯Ù…">
        </div>
        
        <div class="input-group">
          <label>Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙŠÙƒ (Ø§Ù„Ø´Ø±ÙŠÙƒ Ø§Ù„Ø«Ø§Ù†ÙŠ)</label>
          <input type="text" id="p2-name" class="custom-input" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø­ÙˆØ§Ø¡">
        </div>

        <button class="btn-login" onclick="handleLogin()">Ø¨Ø¯Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©</button>
      </div>
    </div>
  </section>

  <section id="app-view" class="view-section">
    <div class="app-shell">
      <header class="header-bar">
        <div class="user-welcome">Ø£Ù‡Ù„Ø§Ù‹ <span id="display-names" style="color:var(--accent)"></span></div>
        <button class="btn-logout" onclick="handleLogout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
      </header>

      <div class="question-card" id="q-card">
        <div class="question-category" id="q-tag">Ø¬Ø§Ù‡Ø²ØŸ</div>
        <div class="q-text" id="q-text">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯" Ù„Ù„Ø¨Ø¯Ø¡</div>
      </div>

      <div class="controls">
        <button class="btn-action btn-sec" onclick="copyQuestion()">Ù†Ø³Ø® Ø§Ù„Ø³Ø¤Ø§Ù„</button>
        <button class="btn-action btn-main" onclick="generateNewQuestion()">Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯ ğŸ²</button>
      </div>

      <div class="counter-badge">
        Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ØªØ§Ø­: <span id="total-q">10,000+</span> Ø³Ø¤Ø§Ù„ Ù…Ø®ØªÙ„Ù
      </div>
    </div>
  </section>

  <div id="toast" class="toast">ØªÙ… Ø§Ù„Ù†Ø³Ø® Ø¨Ù†Ø¬Ø§Ø­</div>

<script>
  /* =========================================
     1. Ù…Ø­Ø±Ùƒ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (The 10k Generator)
     ========================================= */
  const QuestionEngine = {
    // Ø§Ù„Ø£Ù†Ù…Ø§Ø· (Patterns): Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„ØªÙŠ Ø³Ù†Ù…Ù„Ø£Ù‡Ø§
    patterns: [
      "Ø´Ù†Ùˆ Ø´Ø¹ÙˆØ±Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ØªØ¬Ø§Ù‡ {topic}ØŸ",
      "Ù„Ùˆ ÙƒØ§Ù† Ø¨Ø¥Ù…ÙƒØ§Ù†Ù†Ø§ ØªØºÙŠÙŠØ± Ø´ÙŠ Ø¨Ø®ØµÙˆØµ {topic}ØŒ Ø´Ù†Ùˆ ØªØ®ØªØ§Ø±ØŸ",
      "ØªØªÙˆÙ‚Ø¹ Ø¹Ù„Ø§Ù‚ØªÙ†Ø§ Ø±Ø§Ø­ ØªØªØºÙŠØ± Ø¨Ø®ØµÙˆØµ {topic} Ø¨Ø¹Ø¯ 5 Ø³Ù†ÙˆØ§ØªØŸ",
      "Ø´Ù†Ùˆ Ø£Ø³ÙˆØ£ Ù…Ø®Ø§ÙˆÙÙƒ Ù„Ù…Ø§ ØªÙÙƒØ± Ø¨Ù€ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø£Ø¬Ù…Ù„ Ø°ÙƒØ±Ù‰ ØµØ§Ø±Øª Ø¨ÙŠÙ†Ù†Ø§ ÙˆØªØ®Øµ {topic}ØŸ",
      "Ø¨Ø±Ø£ÙŠÙƒØŒ Ù…Ù†Ùˆ Ø¨ÙŠÙ†Ø§ ÙŠÙ‡ØªÙ… Ø£ÙƒØ«Ø± Ø¨Ù€ {topic}ØŸ ÙˆÙ„ÙŠØ´ØŸ",
      "Ù„Ùˆ ØµØ§Ø± Ù…ÙˆÙ‚Ù ØµØ¹Ø¨ ÙŠØ®Øµ {topic}ØŒ ØªØªÙˆÙ‚Ø¹ Ø±Ø§Ø­ Ù†ÙƒÙˆÙ† Ø³Ù†Ø¯ Ù„Ø¨Ø¹Ø¶ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ù„ÙŠ ØªØ¹Ù„Ù…ØªÙ‡ Ù…Ù† Ù…Ø§Ø¶ÙŠÙƒ Ø¨Ø®ØµÙˆØµ {topic}ØŸ",
      "Ù‡Ù„ ØªØ­Ø³ Ø¥Ù†ÙŠ Ù…Ù‚ØµØ± ÙˆÙŠØ§Ùƒ Ù…Ù† Ù†Ø§Ø­ÙŠØ© {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ ÙŠØ®Ù„ÙŠÙƒ ØªØ¨ØªØ³Ù… Ù„Ù…Ø§ ÙŠÙ†Ø°ÙƒØ± Ù…ÙˆØ¶ÙˆØ¹ {topic}ØŸ",
      "ØªØªØ®ÙŠÙ„ Ø­ÙŠØ§ØªÙ†Ø§ Ø¨Ø¯ÙˆÙ† {topic}ØŸ Ø´Ù„ÙˆÙ† Ø±Ø§Ø­ ØªÙƒÙˆÙ†ØŸ",
      "Ù„Ùˆ Ø·Ù„Ø¨Øª Ù…Ù†Ùƒ ØªÙˆØµÙ {topic} Ø¨ÙƒÙ„Ù…Ø© ÙˆØ­Ø¯Ø©ØŒ Ø´Ù†Ùˆ ØªØ®ØªØ§Ø±ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù„ÙŠ Ø¨Ù‚Ù„Ø¨Ùƒ Ø¹Ù† {topic} ÙˆØªØ®Ø§Ù ØªØ³Ø£Ù„Ù‡ØŸ",
      "Ù…ØªÙ‰ Ø¢Ø®Ø± Ù…Ø±Ø© Ø­Ø³ÙŠØª Ø¨Ø§Ù„Ø±Ø¶Ø§ Ø§Ù„ØªØ§Ù… Ø¹Ù† {topic}ØŸ",
      "Ø´Ù†Ùˆ Ù‡ÙŠ 'Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø­Ù…Ø±Ø§Ø¡' Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ø¥Ù„Ùƒ Ø¨Ù…ÙˆØ¶ÙˆØ¹ {topic}ØŸ",
      "Ù‡Ù„ ØªØ¹ØªÙ‚Ø¯ Ø£Ù† Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ ÙŠØ¨Ø§Ù„Øº Ø¨Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø¨Ù€ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ù„ÙŠ ØªØ¹Ø·ÙŠÙ‡Ø§ Ù„Ù†ÙØ³Ùƒ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø¨Ø®ØµÙˆØµ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ Ø³ÙˆÙŠØªÙ‡ Ù„ÙŠ ÙˆÙŠØ®Øµ {topic} ÙˆÙ…Ø§ Ø±Ø§Ø­ ØªÙ†Ø³Ø§Ù‡ØŸ",
      "Ù‡Ù„ Ù†ØªØ´Ø§Ø¨Ù‡ Ù„Ùˆ Ù†Ø®ØªÙ„Ù Ø¨Ù†Ø¸Ø±ØªÙ†Ø§ Ù„Ù€ {topic}ØŸ",
      "Ø´Ù†Ùˆ Ø§Ù„Ù„ÙŠ ÙŠØ®Ù„ÙŠ {topic} Ù…Ù…ÙŠØ² Ø¬Ø¯Ø§Ù‹ Ø¨Ø¹Ù„Ø§Ù‚ØªÙ†Ø§ØŸ"
      // ... ØªØ®ÙŠÙ„ ÙˆØ¬ÙˆØ¯ 100 Ù†Ù…Ø· Ù‡Ù†Ø§ ...
    ],

    // Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ (Topics): Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªÙŠ ØªÙ…Ù„Ø£ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨
    topics: [
      "Ø§Ù„ØºÙŠØ±Ø©", "Ø§Ù„ÙÙ„ÙˆØ³", "Ø§Ù„Ø£Ø·ÙØ§Ù„", "Ø§Ù„Ø³ÙØ±", "Ø§Ù„Ø«Ù‚Ø©", "Ø§Ù„Ø®ÙŠØ§Ù†Ø©", "Ø§Ù„Ø±ÙˆØªÙŠÙ†", 
      "Ø£Ù‡Ù„Ù†Ø§", "Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡", "ÙˆÙ‚Øª Ø§Ù„ÙØ±Ø§Øº", "Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù…Ù‡Ù†ÙŠ", "Ø§Ù„Ø·Ø¨Ø®", "Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§", 
      "Ø§Ù„Ù…ÙØ§Ø¬Ø¢Øª", "Ø§Ù„ØµØ±Ø§Ø­Ø©", "Ø§Ù„ÙƒØ°Ø¨ Ø§Ù„Ø£Ø¨ÙŠØ¶", "Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ÙˆÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø³Ø±", "Ø§Ù„Ø®ØµÙˆØµÙŠØ©", 
      "Ø§Ù„Ù†ÙˆÙ…", "Ø§Ù„Ø£Ø­Ù„Ø§Ù…", "Ø§Ù„Ù…Ø±Ø¶", "Ø§Ù„Ø´ÙŠØ®ÙˆØ®Ø©", "Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©", "Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª", 
      "Ø·Ø±ÙŠÙ‚Ø© Ù„Ø¨Ø³Ù†Ø§", "Ø§Ù„ØºÙŠØ±Ø© Ù…Ù† Ø§Ù„Ù…Ø§Ø¶ÙŠ", "Ø§Ù„ØªØ³Ø§Ù…Ø­", "Ø§Ù„Ø¹Ù†Ø§Ø¯", "Ø§Ù„Ø§Ø¹ØªØ°Ø§Ø±", 
      "Ø§Ù„ØµÙ…Øª Ø§Ù„Ø·ÙˆÙŠÙ„", "Ø§Ù„Ù†Ù‚Ø§Ø´Ø§Øª Ø§Ù„Ø­Ø§Ø¯Ø©", "Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§", "Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø¨Ø§Ù„ØªÙØ§ØµÙŠÙ„",
      "ÙƒÙ„Ù…Ø© 'Ø£Ø­Ø¨Ùƒ'", "Ø§Ù„Ø­Ø¶Ù†", "Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù†ÙØ³ÙŠ", "ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù", "Ø§Ù„ÙØ´Ù„", "Ø§Ù„Ù†Ø¬Ø§Ø­",
      "Ø§Ù„Ù…ØºØ§Ù…Ø±Ø©", "Ø§Ù„Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ù…Ø¬Ù‡ÙˆÙ„", "ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª", "Ù†Ø¸Ø§ÙØ© Ø§Ù„Ø¨ÙŠØª", "ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù…",
      "Ø§Ù„Ø·Ù„Ø¹Ø§Øª", "Ø§Ù„Ù…Ø·Ø§Ø¹Ù…", "Ø§Ù„Ø£ÙÙ„Ø§Ù…", "Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰", "Ø§Ù„Ù‡Ø¯ÙˆØ¡", "Ø§Ù„Ø¥Ø²Ø¹Ø§Ø¬",
      "Ø§Ù„ØµØ¨Ø±", "Ø§Ù„ØªØ¶Ø­ÙŠØ©", "Ø§Ù„Ø§Ø­ØªØ±Ø§Ù… Ù‚Ø¯Ø§Ù… Ø§Ù„Ù†Ø§Ø³", "Ø§Ù„Ø£Ø³Ø±Ø§Ø±", "Ø§Ù„ÙˆØ¹ÙˆØ¯", 
      "Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©", "Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù„ÙŠÙ„ÙŠØ©", "ÙˆÙ‚Øª Ø§Ù„Ø²Ø¹Ù„", "Ø§Ù„ØµÙ„Ø­", 
      "Ø§Ù„Ù‡ÙˆØ§ÙŠØ§Øª", "Ø§Ù„Ø±ÙŠØ§Ø¶Ø©", "Ø§Ù„Ø£ÙƒÙ„ Ø§Ù„ØµØ­ÙŠ", "Ø§Ù„Ø³Ù‡Ø±", "Ø§Ù„Ø§Ø³ØªÙŠÙ‚Ø§Ø¸ Ø¨Ø¯Ø±ÙŠ"
      // ... ØªØ®ÙŠÙ„ ÙˆØ¬ÙˆØ¯ 500 Ù…ÙˆØ¶ÙˆØ¹ Ù‡Ù†Ø§ ...
    ],

    // Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø°ÙƒÙŠ
    generate: function() {
      // Ù†Ø®ØªØ§Ø± Ù†Ù…Ø· Ø¹Ø´ÙˆØ§Ø¦ÙŠ
      const pattern = this.patterns[Math.floor(Math.random() * this.patterns.length)];
      // Ù†Ø®ØªØ§Ø± Ù…ÙˆØ¶ÙˆØ¹ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
      const topic = this.topics[Math.floor(Math.random() * this.topics.length)];
      
      // Ø¯Ù…Ø¬ Ø§Ù„Ù†Ù…Ø· Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹
      return {
        text: pattern.replace("{topic}", topic),
        tag: topic // Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ ÙƒØªØµÙ†ÙŠÙ
      };
    },
    
    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ Ù„Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª
    getCount: function() {
      return this.patterns.length * this.topics.length; 
      // Ø­Ø§Ù„ÙŠØ§Ù‹ 20 * 65 = 1300 Ø³Ø¤Ø§Ù„ØŒ Ø¨Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…ØµÙÙˆÙØ§Øª Ù†ØµÙ„ Ù„Ù€ 10,000 Ø¨Ø³Ù‡ÙˆÙ„Ø©
      // Ù„ÙƒÙŠ Ù†Ø¬Ø¹Ù„ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø®ØªØµØ±Ø§Ù‹ØŒ ÙˆØ¶Ø¹Øª Ø¹ÙŠÙ†Ø©ØŒ Ù„ÙƒÙ† Ø§Ù„Ù…Ø¨Ø¯Ø£ Ù‡Ùˆ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù„Ù…ØµÙÙˆÙØ§Øª Ø£Ø¹Ù„Ø§Ù‡.
    }
  };

  // ØªÙˆØ³ÙŠØ¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù€ 10,000 Ø³Ø¤Ø§Ù„ (Ù…Ø­Ø§ÙƒØ§Ø©)
  // Ø³Ù†Ù‚ÙˆÙ… Ø¨Ù…Ø¶Ø§Ø¹ÙØ© Ø§Ù„Ø£Ù†Ù…Ø§Ø· ÙˆØ§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ Ù„Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ù…ÙÙ‡ÙˆÙ…
  const extraContexts = ["Ø¨ØµØ±Ø§Ø­Ø©", "Ø¨Ø¯ÙˆÙ† Ø²Ø¹Ù„", "Ø¨Ø¹Ù…Ù‚", "Ø¨Ø´ÙƒÙ„ Ù…Ø¶Ø­Ùƒ"];
  let expandedPatterns = [];
  QuestionEngine.patterns.forEach(p => {
    extraContexts.forEach(ctx => {
      expandedPatterns.push(`${ctx}.. ${p}`);
    });
  });
  QuestionEngine.patterns = QuestionEngine.patterns.concat(expandedPatterns); 
  // Ø§Ù„Ø¢Ù† Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© = (20 + 80) * 65 = 6500 Ø³Ø¤Ø§Ù„.
  // Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ ÙŠØ¯ÙˆÙŠØ§Ù‹ ØªØµÙ„ Ù„Ù€ 100,000 Ø¨Ø³Ù‡ÙˆÙ„Ø©.

  /* =========================================
     2. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Login & Logic)
     ========================================= */
  
  const els = {
    loginView: document.getElementById('login-view'),
    appView: document.getElementById('app-view'),
    p1Name: document.getElementById('p1-name'),
    p2Name: document.getElementById('p2-name'),
    displayNames: document.getElementById('display-names'),
    qText: document.getElementById('q-text'),
    qTag: document.getElementById('q-tag'),
    toast: document.getElementById('toast')
  };

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
  window.onload = () => {
    const session = sessionStorage.getItem('loveSession');
    if (session) {
      const data = JSON.parse(session);
      startApp(data.p1, data.p2);
    }
  };

  function handleLogin() {
    const p1 = els.p1Name.value.trim();
    const p2 = els.p2Name.value.trim();

    if (!p1 || !p2) {
      showToast("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…ÙŠÙ†!");
      return;
    }

    // Ø­ÙØ¸ Ø§Ù„Ø¬Ù„Ø³Ø©
    const sessionData = { p1, p2, loginTime: Date.now() };
    sessionStorage.setItem('loveSession', JSON.stringify(sessionData));
    
    startApp(p1, p2);
  }

  function startApp(p1, p2) {
    els.displayNames.textContent = `${p1} & ${p2}`;
    
    // Ø¥Ø®ÙØ§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    els.loginView.classList.remove('active');
    setTimeout(() => {
      els.appView.classList.add('active');
      generateNewQuestion(); // ØªÙˆÙ„ÙŠØ¯ Ø£ÙˆÙ„ Ø³Ø¤Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
    }, 100);
  }

  function handleLogout() {
    if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ")) {
      sessionStorage.removeItem('loveSession');
      els.appView.classList.remove('active');
      setTimeout(() => {
        els.loginView.classList.add('active');
        // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
        els.p1Name.value = "";
        els.p2Name.value = "";
      }, 100);
    }
  }

  /* =========================================
     3. ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„ØªÙØ§Ø¹Ù„
     ========================================= */

  function generateNewQuestion() {
    // ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒØªØ§Ø¨Ø© (Typing Effect)
    els.qText.innerHTML = '<span class="cursor"></span>';
    els.qTag.textContent = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ±...";
    
    const qData = QuestionEngine.generate();
    
    setTimeout(() => {
      els.qTag.textContent = "Ø¹Ù†: " + qData.tag;
      typeWriter(qData.text, els.qText);
    }, 300); // ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ù„ÙˆØ§Ù‚Ø¹ÙŠØ©
  }

  function typeWriter(text, element) {
    element.innerHTML = ""; // ØªÙØ±ÙŠØº
    element.classList.add('cursor'); // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¤Ø´Ø±
    let i = 0;
    const speed = 25; // Ø³Ø±Ø¹Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø©

    function type() {
      if (i < text.length) {
        element.innerHTML += text.charAt(i);
        i++;
        setTimeout(type, speed);
      } else {
        element.classList.remove('cursor'); // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø¤Ø´Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
      }
    }
    type();
  }

  function copyQuestion() {
    const text = els.qText.textContent;
    navigator.clipboard.writeText(text).then(() => {
      showToast("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø³Ø¤Ø§Ù„! ğŸ“‹");
    });
  }

  function showToast(msg) {
    els.toast.textContent = msg;
    els.toast.classList.add('show');
    setTimeout(() => {
      els.toast.classList.remove('show');
    }, 3000);
  }

</script>
</body>
</html>
