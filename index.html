<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Ø¬Ù„Ø³Ø© Ø­Ø¨ | Love Session Ultimate</title>
    <style>
        :root {
            /* Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© - Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
            --bg-gradient: radial-gradient(circle at top left, #1a102e, #050409, #000000);
            --card-bg: rgba(20, 20, 35, 0.65);
            --card-border: rgba(255, 255, 255, 0.08);
            --text-main: #ffffff;
            --text-muted: #a0a0c0;
            --accent: #ff4d8d;
            --accent-glow: rgba(255, 77, 141, 0.5);
            --secondary: #ffb84d;
            --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            --blur: blur(14px);
            --radius: 20px;
        }

        :root[data-theme="light"] {
            --bg-gradient: radial-gradient(circle at top left, #fff0f6, #e6e6fa, #ffffff);
            --card-bg: rgba(255, 255, 255, 0.75);
            --card-border: rgba(0, 0, 0, 0.08);
            --text-main: #2c1a35;
            --text-muted: #665a70;
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        
        body {
            font-family: var(--font-family);
            background: var(--bg-gradient);
            background-attachment: fixed;
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
            transition: background 0.5s ease;
        }

        /* --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø§Ø´Ø§Øª (View Switching) --- */
        .view-section {
            display: none;
            min-height: 100vh;
            animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ --- */
        .login-container {
            display: flex; align-items: center; justify-content: center; height: 100vh; padding: 20px;
        }
        .login-card {
            background: var(--card-bg); border: 1px solid var(--card-border);
            backdrop-filter: var(--blur); box-shadow: var(--shadow);
            border-radius: var(--radius); padding: 3rem 2rem;
            width: 100%; max-width: 420px; text-align: center;
        }
        .login-logo { font-size: 3rem; margin-bottom: 1rem; text-shadow: 0 0 20px var(--accent-glow); }
        .login-title { font-size: 1.8rem; font-weight: 800; margin-bottom: 0.5rem; }
        .login-subtitle { color: var(--text-muted); margin-bottom: 2rem; font-size: 0.9rem; }
        
        .input-group { margin-bottom: 1.2rem; text-align: right; }
        .input-group label { display: block; margin-bottom: 8px; font-size: 0.85rem; color: var(--text-muted); }
        .custom-input {
            width: 100%; padding: 14px; border-radius: 12px;
            background: rgba(0,0,0,0.2); border: 1px solid var(--card-border);
            color: var(--text-main); font-size: 1rem; transition: 0.3s;
        }
        :root[data-theme="light"] .custom-input { background: rgba(255,255,255,0.5); }
        .custom-input:focus { border-color: var(--accent); box-shadow: 0 0 10px var(--accent-glow); }

        .btn-primary {
            width: 100%; padding: 15px; border-radius: 12px; border: none;
            background: linear-gradient(135deg, var(--accent), var(--secondary));
            color: white; font-weight: bold; font-size: 1.1rem; cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .btn-primary:active { transform: scale(0.98); }

        /* --- Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ --- */
        .app-layout {
            max-width: 1200px; margin: 0 auto; padding: 20px;
            display: grid; grid-template-columns: 350px 1fr; gap: 20px;
        }
        @media (max-width: 900px) { .app-layout { grid-template-columns: 1fr; } }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header-bar {
            grid-column: 1 / -1; display: flex; justify-content: space-between; align-items: center;
            background: var(--card-bg); padding: 15px 25px; border-radius: var(--radius);
            backdrop-filter: var(--blur); border: 1px solid var(--card-border); margin-bottom: 10px;
        }
        .user-info { display: flex; align-items: center; gap: 10px; }
        .avatar-circle {
            width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, var(--accent), var(--secondary));
            display: flex; align-items: center; justify-content: center; font-weight: bold; color: white;
        }
        .btn-icon {
            background: transparent; border: 1px solid var(--card-border); color: var(--text-muted);
            width: 38px; height: 38px; border-radius: 50%; cursor: pointer; transition: 0.3s;
            display: flex; align-items: center; justify-content: center; font-size: 1.1rem;
        }
        .btn-icon:hover { background: rgba(255,255,255,0.1); color: var(--text-main); }
        .btn-logout { color: #ff6b6b; border-color: rgba(255, 107, 107, 0.3); }
        .btn-logout:hover { background: rgba(255, 107, 107, 0.1); }

        /* Ø§Ù„ÙƒØ±ÙˆØª Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª) */
        .card {
            background: var(--card-bg); border: 1px solid var(--card-border);
            backdrop-filter: var(--blur); border-radius: var(--radius); padding: 1.5rem;
            margin-bottom: 20px; transition: transform 0.3s;
        }
        .card-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 1rem; display: flex; align-items: center; gap: 8px; }
        
        /* Ù…Ø´ØºÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ */
        .visualizer {
            display: flex; gap: 4px; height: 40px; align-items: flex-end; justify-content: center;
            margin-bottom: 1rem; opacity: 0.4; transition: 0.3s;
        }
        .visualizer.active { opacity: 1; }
        .bar { width: 5px; background: var(--accent); border-radius: 3px; animation: bounce 1s infinite; }
        .bar:nth-child(even) { animation-duration: 0.6s; background: var(--secondary); }
        @keyframes bounce { 0%, 100% { height: 5px; } 50% { height: 30px; } }

        .music-dropzone {
            border: 2px dashed var(--card-border); border-radius: 12px; padding: 1rem;
            text-align: center; cursor: pointer; transition: 0.3s; font-size: 0.85rem; color: var(--text-muted);
        }
        .music-dropzone:hover { border-color: var(--accent); color: var(--text-main); background: rgba(255,255,255,0.02); }
        .music-controls { display: flex; justify-content: center; gap: 15px; margin-top: 15px; }
        
        /* Ø£Ø¯ÙˆØ§Øª Ø³Ø±ÙŠØ¹Ø© */
        .tools-grid { display: grid; gap: 10px; }
        .tool-btn {
            background: rgba(255,255,255,0.03); border: 1px solid var(--card-border);
            padding: 12px; border-radius: 12px; color: var(--text-main); cursor: pointer;
            text-align: right; display: flex; justify-content: space-between; transition: 0.2s;
        }
        .tool-btn:hover { background: rgba(255,255,255,0.08); transform: translateX(-3px); border-color: var(--accent); }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .main-content { display: flex; flex-direction: column; gap: 20px; }
        
        .mode-tabs {
            display: flex; background: rgba(0,0,0,0.2); padding: 5px; border-radius: 50px;
            margin-bottom: 10px; overflow-x: auto;
        }
        :root[data-theme="light"] .mode-tabs { background: rgba(255,255,255,0.4); }
        .tab-btn {
            flex: 1; padding: 10px 20px; border: none; background: transparent; color: var(--text-muted);
            border-radius: 30px; cursor: pointer; font-size: 0.9rem; white-space: nowrap; transition: 0.3s;
        }
        .tab-btn.active { background: var(--card-bg); color: var(--text-main); font-weight: bold; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }

        .question-display {
            background: var(--card-bg); border: 1px solid var(--card-border);
            border-radius: var(--radius); padding: 3rem 2rem;
            text-align: center; min-height: 280px; display: flex; flex-direction: column;
            justify-content: center; align-items: center; position: relative;
            box-shadow: var(--shadow);
        }
        
        .q-tag {
            position: absolute; top: 20px; background: rgba(255,255,255,0.05); 
            padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; color: var(--accent); border: 1px solid var(--card-border);
        }
        
        .q-text { 
            font-size: 1.5rem; line-height: 1.6; font-weight: 600; margin: 15px 0; 
            background: linear-gradient(135deg, var(--text-main) 0%, var(--text-muted) 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        
        .q-actions { display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap; justify-content: center; }
        .action-btn {
            padding: 10px 20px; border-radius: 30px; border: none; font-weight: 600; cursor: pointer;
            transition: 0.2s; font-size: 0.95rem; display: flex; align-items: center; gap: 8px;
        }
        .btn-gen { background: var(--text-main); color: #000; }
        .btn-gen:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(255,255,255,0.3); }
        .btn-sec { background: rgba(255,255,255,0.05); color: var(--text-main); border: 1px solid var(--card-border); }
        .btn-sec:hover { background: rgba(255,255,255,0.1); }

        /* Ø§Ù„Ù…Ø¤Ø´Ø± (Typing Cursor) */
        .cursor::after { content: '|'; animation: blink 1s infinite; color: var(--accent); }
        @keyframes blink { 50% { opacity: 0; } }

        /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§Øª (Popups) */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 100;
            display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: 0.3s; backdrop-filter: blur(5px);
        }
        .modal-overlay.open { opacity: 1; pointer-events: auto; }
        .modal-content {
            background: #1a1525; width: 90%; max-width: 500px; padding: 25px;
            border-radius: var(--radius); border: 1px solid var(--card-border);
            transform: scale(0.9); transition: 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-height: 85vh; overflow-y: auto; color: #fff;
        }
        :root[data-theme="light"] .modal-content { background: #fff; color: #333; }
        .modal-overlay.open .modal-content { transform: scale(1); }
        .modal-header { display: flex; justify-content: space-between; margin-bottom: 20px; align-items: center; }

        /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª (Toasts) */
        .toast {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(50px);
            background: rgba(20, 20, 20, 0.9); color: #fff; padding: 12px 25px; border-radius: 50px;
            opacity: 0; transition: 0.4s; z-index: 200; pointer-events: none;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3); border: 1px solid var(--card-border);
        }
        .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

    </style>
</head>
<body>

    <section id="login-view" class="view-section active">
        <div class="login-container">
            <div class="login-card">
                <div class="login-logo">â¤ï¸</div>
                <div class="login-title">Ø¬Ù„Ø³Ø© Ø­Ø¨</div>
                <div class="login-subtitle">ÙØ¶Ø§Ø¡ Ø®Ø§Øµ Ù„Ù„Ø­ÙˆØ§Ø±ØŒ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±ØŒ ÙˆØ§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰</div>

                <div class="input-group">
                    <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„</label>
                    <input type="text" id="p1-input" class="custom-input" placeholder="Ø§Ø³Ù…Ùƒ">
                </div>
                <div class="input-group">
                    <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ø§Ù†ÙŠ</label>
                    <input type="text" id="p2-input" class="custom-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙŠÙƒ">
                </div>

                <button class="btn-primary" onclick="App.login()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¬Ù„Ø³Ø©</button>
            </div>
        </div>
    </section>

    <section id="app-view" class="view-section">
        <div class="app-layout">
            
            <header class="header-bar">
                <div class="user-info">
                    <div class="avatar-circle" id="user-avatar">?</div>
                    <div>
                        <div style="font-weight:bold" id="user-names-display">...</div>
                        <div style="font-size:0.75rem; color:var(--text-muted)">Ø¬Ù„Ø³Ø© Ù†Ø´Ø·Ø©</div>
                    </div>
                </div>
                <div style="display:flex; gap:8px">
                    <button class="btn-icon" onclick="App.toggleTheme()" title="ØªØºÙŠÙŠØ± Ø§Ù„Ø«ÙŠÙ…">ğŸŒ—</button>
                    <button class="btn-icon btn-logout" onclick="App.logout()" title="Ø®Ø±ÙˆØ¬">âœ–</button>
                </div>
            </header>

            <aside>
                <div class="card">
                    <div class="card-title"><span>â™«</span> Ù…Ø´ØºÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰</div>
                    <div class="visualizer" id="visualizer">
                        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
                        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
                    </div>
                    <div class="music-dropzone" id="drop-zone">
                        Ø§Ø¶ØºØ· Ù„Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ØµÙˆØªÙŠ<br>Ø£Ùˆ Ø§Ø³Ø­Ø¨Ù‡ Ù‡Ù†Ø§
                        <input type="file" id="audio-input" accept="audio/*" style="display:none">
                    </div>
                    <div style="text-align:center; margin-top:10px; font-size:0.8rem; height:20px; overflow:hidden;" id="track-name"></div>
                    <div class="music-controls">
                        <button class="btn-icon" id="btn-play" disabled>â–¶</button>
                        <button class="btn-icon" id="btn-stop" disabled>â– </button>
                    </div>
                    <audio id="main-audio"></audio>
                </div>

                <div class="card">
                    <div class="card-title"><span>â˜…</span> Ø£Ø¯ÙˆØ§Øª Ù…Ø´ØªØ±ÙƒØ©</div>
                    <div class="tools-grid">
                        <div class="tool-btn" onclick="Storage.openModal('memories')">
                            <span>ğŸ“” Ø°ÙƒØ±ÙŠØ§ØªÙ†Ø§</span> <span>â†</span>
                        </div>
                        <div class="tool-btn" onclick="Storage.openModal('goals')">
                            <span>ğŸ¯ Ø£Ù‡Ø¯Ø§Ù Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©</span> <span>â†</span>
                        </div>
                        <div class="tool-btn" onclick="Storage.openModal('game')">
                            <span>ğŸ² Ù„Ø¹Ø¨Ø© Ø³Ø±ÙŠØ¹Ø©</span> <span>â†</span>
                        </div>
                    </div>
                </div>
            </aside>

            <main class="main-content">
                <div class="mode-tabs">
                    <button class="tab-btn active" onclick="QuestionEngine.setMode('love', this)">Ø­Ø¨ & ØªØ¹Ø§Ø±Ù</button>
                    <button class="tab-btn" onclick="QuestionEngine.setMode('engaged', this)">Ø®Ø·ÙˆØ¨Ø©</button>
                    <button class="tab-btn" onclick="QuestionEngine.setMode('married', this)">Ø²ÙˆØ§Ø¬</button>
                    <button class="tab-btn" onclick="QuestionEngine.setMode('deep', this)">Ø¹Ù…ÙŠÙ‚ Ø¬Ø¯Ø§Ù‹</button>
                </div>

                <div class="question-display">
                    <div class="q-tag" id="q-category">Ø¬Ø§Ù‡Ø²ØŸ</div>
                    <div class="q-text" id="q-text">Ø§Ø¶ØºØ· "Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯" Ù„ØªØ¨Ø¯Ø£ Ø±Ø­Ù„Ø© Ù…Ù† 10,000 Ø³Ø¤Ø§Ù„...</div>
                    
                    <div class="q-actions">
                        <button class="action-btn btn-sec" onclick="App.copyText()">ğŸ“‹ Ù†Ø³Ø®</button>
                        <button class="action-btn btn-gen" onclick="QuestionEngine.newQuestion()">âœ¨ Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯</button>
                    </div>
                </div>

                <div style="text-align:center; font-size:0.8rem; color:var(--text-muted); margin-top:10px;">
                    ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ <span id="q-counter">0</span> Ø³Ø¤Ø§Ù„ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ù„Ø³Ø©
                </div>
            </main>
        </div>
    </section>

    <div class="modal-overlay" id="generic-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</h3>
                <button class="btn-icon" onclick="Storage.closeModal()" style="width:30px; height:30px;">âœ•</button>
            </div>
            <div id="modal-body"></div>
            <div style="margin-top:20px; text-align:left;">
                <button class="btn-primary" style="width:auto; padding:8px 20px; font-size:0.9rem" onclick="Storage.saveAndClose()">Ø­ÙØ¸ ÙˆØ¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">ØªÙ… Ø§Ù„Ù†Ø³Ø® Ø¨Ù†Ø¬Ø§Ø­</div>

<script>
    /* =================================================================
       1. Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¶Ø®Ù…Ø© (Patterns & Topics) - Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¦ÙŠ
       ================================================================= */
    const DB = {
        // Ø§Ù„Ø£Ù†Ù…Ø§Ø·: Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªÙŠ ØªÙ‚Ø¨Ù„ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
        patterns: [
            "Ø´Ù†Ùˆ Ø´Ø¹ÙˆØ±Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ØªØ¬Ø§Ù‡ {topic}ØŸ",
            "Ù„Ùˆ ÙƒØ§Ù† Ø¨Ø¥Ù…ÙƒØ§Ù†Ù†Ø§ ØªØºÙŠÙŠØ± Ø´ÙŠ ÙˆØ§Ø­Ø¯ Ø¨Ø®ØµÙˆØµ {topic}ØŒ Ø´Ù†Ùˆ ØªØ®ØªØ§Ø±ØŸ",
            "ØªØªÙˆÙ‚Ø¹ Ø¹Ù„Ø§Ù‚ØªÙ†Ø§ Ø±Ø§Ø­ ØªØªØºÙŠØ± Ø¨Ø®ØµÙˆØµ {topic} Ø¨Ø¹Ø¯ 5 Ø³Ù†ÙˆØ§ØªØŸ",
            "Ø´Ù†Ùˆ Ø£Ø³ÙˆØ£ Ù…Ø®Ø§ÙˆÙÙƒ Ù„Ù…Ø§ ØªÙÙƒØ± Ø¨Ù€ {topic}ØŸ",
            "Ø´Ù†Ùˆ Ø£Ø¬Ù…Ù„ Ø°ÙƒØ±Ù‰ ØµØ§Ø±Øª Ø¨ÙŠÙ†Ù†Ø§ ÙˆØªØ®Øµ {topic}ØŸ",
            "Ø¨Ø±Ø£ÙŠÙƒØŒ Ù…Ù†Ùˆ Ø¨ÙŠÙ†Ø§ ÙŠÙ‡ØªÙ… Ø£ÙƒØ«Ø± Ø¨Ù€ {topic}ØŸ ÙˆÙ„ÙŠØ´ØŸ",
            "Ù„Ùˆ ØµØ§Ø± Ù…ÙˆÙ‚Ù ØµØ¹Ø¨ ÙŠØ®Øµ {topic}ØŒ ØªØªÙˆÙ‚Ø¹ Ø±Ø§Ø­ Ù†ÙƒÙˆÙ† Ø³Ù†Ø¯ Ù„Ø¨Ø¹Ø¶ØŸ",
            "Ø´Ù†Ùˆ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ù„ÙŠ ØªØ¹Ù„Ù…ØªÙ‡ Ù…Ù† Ù…Ø§Ø¶ÙŠÙƒ Ø¨Ø®ØµÙˆØµ {topic}ØŸ",
            "Ù‡Ù„ ØªØ­Ø³ Ø¥Ù†ÙŠ Ù…Ù‚ØµØ± ÙˆÙŠØ§Ùƒ Ù…Ù† Ù†Ø§Ø­ÙŠØ© {topic}ØŸ",
            "Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ ÙŠØ®Ù„ÙŠÙƒ ØªØ¨ØªØ³Ù… Ù„Ù…Ø§ ÙŠÙ†Ø°ÙƒØ± Ù…ÙˆØ¶ÙˆØ¹ {topic}ØŸ",
            "ØªØªØ®ÙŠÙ„ Ø­ÙŠØ§ØªÙ†Ø§ Ø¨Ø¯ÙˆÙ† {topic}ØŸ Ø´Ù„ÙˆÙ† Ø±Ø§Ø­ ØªÙƒÙˆÙ†ØŸ",
            "Ù„Ùˆ Ø·Ù„Ø¨Øª Ù…Ù†Ùƒ ØªÙˆØµÙ {topic} Ø¨ÙƒÙ„Ù…Ø© ÙˆØ­Ø¯Ø©ØŒ Ø´Ù†Ùˆ ØªØ®ØªØ§Ø±ØŸ",
            "Ø´Ù†Ùˆ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù„ÙŠ Ø¨Ù‚Ù„Ø¨Ùƒ Ø¹Ù† {topic} ÙˆØªØ®Ø§Ù ØªØ³Ø£Ù„Ù‡ØŸ",
            "Ù…ØªÙ‰ Ø¢Ø®Ø± Ù…Ø±Ø© Ø­Ø³ÙŠØª Ø¨Ø§Ù„Ø±Ø¶Ø§ Ø§Ù„ØªØ§Ù… Ø¹Ù† {topic}ØŸ",
            "Ø´Ù†Ùˆ Ù‡ÙŠ 'Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø­Ù…Ø±Ø§Ø¡' Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ø¥Ù„Ùƒ Ø¨Ù…ÙˆØ¶ÙˆØ¹ {topic}ØŸ",
            "Ù‡Ù„ ØªØ¹ØªÙ‚Ø¯ Ø£Ù† Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ ÙŠØ¨Ø§Ù„Øº Ø¨Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø¨Ù€ {topic}ØŸ",
            "Ø´Ù†Ùˆ Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ù„ÙŠ ØªØ¹Ø·ÙŠÙ‡Ø§ Ù„Ù†ÙØ³Ùƒ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø¨Ø®ØµÙˆØµ {topic}ØŸ",
            "Ø´Ù†Ùˆ Ø§Ù„Ø´ÙŠ Ø§Ù„Ù„ÙŠ Ø³ÙˆÙŠØªÙ‡ Ù„ÙŠ ÙˆÙŠØ®Øµ {topic} ÙˆÙ…Ø§ Ø±Ø§Ø­ ØªÙ†Ø³Ø§Ù‡ØŸ",
            "Ù‡Ù„ Ù†ØªØ´Ø§Ø¨Ù‡ Ù„Ùˆ Ù†Ø®ØªÙ„Ù Ø¨Ù†Ø¸Ø±ØªÙ†Ø§ Ù„Ù€ {topic}ØŸ",
            "Ø´Ù†Ùˆ Ø§Ù„Ù„ÙŠ ÙŠØ®Ù„ÙŠ {topic} Ù…Ù…ÙŠØ² Ø¬Ø¯Ø§Ù‹ Ø¨Ø¹Ù„Ø§Ù‚ØªÙ†Ø§ØŸ",
            "Ø¨ØµØ±Ø§Ø­Ø©ØŒ Ø´Ù†Ùˆ ØªÙ‚ÙŠÙ…Ùƒ Ù„ØªØ¹Ø§Ù…Ù„Ù†Ø§ Ù…Ø¹ {topic} Ù…Ù† 10ØŸ",
            "Ø´Ù†Ùˆ Ø§Ù„Ø£ØºÙ†ÙŠØ© Ø£Ùˆ Ø§Ù„ÙÙŠÙ„Ù… Ø§Ù„Ù„ÙŠ ÙŠØ°ÙƒØ±Ùƒ Ø¨Ù€ {topic}ØŸ",
            "Ù„Ùˆ {topic} ÙƒØ§Ù† Ø´Ø®ØµØŒ Ø´Ù†Ùˆ ÙƒÙ†Øª Ø±Ø§Ø­ ØªÙ‚ÙˆÙ„Ù‡ØŸ"
        ],
        // Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ù…Ù‚Ø³Ù…Ø© Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆØ¶Ø§Ø¹ (Modes)
        topics: {
            love: [
                "Ø§Ù„ØºÙŠØ±Ø©", "Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…", "Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©", "Ø§Ù„Ù„Ù‚Ø§Ø¡ Ø§Ù„Ø£ÙˆÙ„", "Ø§Ù„Ù…Ø³Ø§ÙØ§Øª", "Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§", 
                "Ø§Ù„Ù…ÙØ§Ø¬Ø¢Øª", "Ø§Ù„Ø«Ù‚Ø©", "Ø§Ù„Ù…Ø§Ø¶ÙŠ", "Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡", "Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§", "Ø§Ù„Ù„Ø¨Ø³", "Ø§Ù„Ø¶Ø­Ùƒ", 
                "Ø§Ù„Ø­Ø²Ù†", "Ø§Ù„Ø§Ø­ØªÙˆØ§Ø¡", "Ø§Ù„ÙˆØ¹ÙˆØ¯", "Ø§Ù„Ø¹ÙŠÙˆÙ†", "Ù„Ù…Ø³Ø© Ø§Ù„ÙŠØ¯", "Ø§Ù„ØµÙˆØª", "Ø§Ù„Ø³Ù‡Ø±", "Ø§Ù„Ø£Ø­Ù„Ø§Ù…",
                "Ø§Ù„Ø£ØºØ§Ù†ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©", "Ø§Ù„Ø®ØµÙˆØµÙŠØ©", "ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø³Ø±", "Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¯Ù„Ø¹", "Ø§Ù„Ø®Ø¬Ù„"
            ],
            engaged: [
                "ØªØ±ØªÙŠØ¨Ø§Øª Ø§Ù„Ø¹Ø±Ø³", "Ø¨ÙŠØª Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„", "Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©", "Ø£Ù‡Ù„ÙŠ ÙˆØ£Ù‡Ù„Ùƒ", "Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©", "Ø´Ù‡Ø± Ø§Ù„Ø¹Ø³Ù„",
                "Ø§Ù„Ø£Ø«Ø§Ø«", "Ø­ÙÙ„Ø© Ø§Ù„Ø®Ø·ÙˆØ¨Ø©", "Ø§Ù„Ø°Ù‡Ø¨", "Ø§Ù„Ø·Ø¨Ø®", "ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù…", "Ø§Ù„Ø¯ÙŠÙˆÙ†", "Ø§Ù„ØªÙˆÙÙŠØ±", 
                "Ø§Ù„Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ø²ÙˆØ§Ø¬", "Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ù†Ø§Ø³", "ØªÙˆÙ‚Ø¹Ø§ØªÙ†Ø§", "Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø«Ù‚Ø§ÙÙŠØ©", "Ø§Ù„Ø¹Ø§Ø¯Ø§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ù„ÙŠØ¯"
            ],
            married: [
                "Ø§Ù„Ø±ÙˆØªÙŠÙ† Ø§Ù„ÙŠÙˆÙ…ÙŠ", "ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø£Ø·ÙØ§Ù„", "Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø¨ÙŠØª", "Ø§Ù„Ø¹Ù…Ù„", "Ø§Ù„Ø¥Ø±Ù‡Ø§Ù‚", "ÙˆÙ‚Øª Ø§Ù„ÙØ±Ø§Øº",
                "Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ©", "Ø§Ù„Ù†ÙˆÙ…", "Ø§Ù„Ù†Ø¸Ø§ÙØ©", "Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ù‚Ø§Ø±Ø¨", "Ø§Ù„Ø³ÙØ±", "ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø¨",
                "Ø§Ù„Ø´ÙŠØ®ÙˆØ®Ø© Ù…Ø¹Ø§Ù‹", "Ø¯Ø¹Ù… Ø§Ù„Ø·Ù…ÙˆØ­", "Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©", "Ø§Ù„ØªÙ‚Ø¯ÙŠØ±", "Ø§Ù„ØµØ¨Ø±", "Ø§Ù„ØªØ¶Ø­ÙŠØ©"
            ],
            deep: [
                "Ø§Ù„Ù…ÙˆØª", "Ù…Ø¹Ù†Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©", "Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†", "Ø£ÙƒØ¨Ø± ÙØ´Ù„", "Ø§Ù„Ù†Ø¯Ù…", "Ø§Ù„Ø·ÙÙˆÙ„Ø© Ø§Ù„Ù‚Ø§Ø³ÙŠØ©", 
                "Ù†Ù‚Ø§Ø· Ø§Ù„Ø¶Ø¹Ù", "Ø§Ù„ÙƒÙˆØ§Ø¨ÙŠØ³", "Ø§Ù„ÙˆØ­Ø¯Ø©", "Ø§Ù„Ø£Ø³Ø±Ø§Ø± Ø§Ù„Ù…Ø¯ÙÙˆÙ†Ø©", "Ø§Ù„ØµØ­Ø© Ø§Ù„Ù†ÙØ³ÙŠØ©", 
                "Ø§Ù„ØºØ¶Ø¨ Ø§Ù„Ù…ÙƒØ¨ÙˆØª", "Ø§Ù„ØªØ³Ø§Ù…Ø­", "Ø§Ù„Ø­Ø±ÙŠØ©", "Ø§Ù„Ù‚ÙŠÙˆØ¯", "Ø§Ù„Ø°Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©"
            ]
        },
        // Ø³ÙŠØ§Ù‚Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª
        contexts: ["Ø¨ØµØ±Ø§Ø­Ø© ØªØ§Ù…Ø©..", "Ø¨Ø¯ÙˆÙ† Ø²Ø¹Ù„..", "ØªØ®ÙŠÙ„ ÙˆÙŠØ§ÙŠ..", "Ø³Ø¤Ø§Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ..", "Ù…Ù† ÙƒÙ„ Ù‚Ù„Ø¨Ùƒ..", "Ø¨ÙŠÙ†Ù†Ø§ ÙˆØ¨Ø³.."]
    };

    /* =================================================================
       2. Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (App Logic)
       ================================================================= */
    const App = {
        state: { p1: '', p2: '', qCount: 0 },
        
        init: function() {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù…Ø­ÙÙˆØ¸
            const savedTheme = localStorage.getItem('love_theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø©
            const session = sessionStorage.getItem('love_session');
            if (session) {
                const data = JSON.parse(session);
                this.state.p1 = data.p1;
                this.state.p2 = data.p2;
                this.enterApp();
            }
        },

        login: function() {
            const p1 = document.getElementById('p1-input').value.trim();
            const p2 = document.getElementById('p2-input').value.trim();
            if (!p1 || !p2) return this.showToast('Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø£Ø³Ù…Ø§Ø¡!');
            
            this.state.p1 = p1;
            this.state.p2 = p2;
            sessionStorage.setItem('love_session', JSON.stringify({p1, p2}));
            this.enterApp();
        },

        enterApp: function() {
            document.getElementById('login-view').classList.remove('active');
            setTimeout(() => {
                document.getElementById('app-view').classList.add('active');
                document.getElementById('user-names-display').textContent = `${this.state.p1} & ${this.state.p2}`;
                document.getElementById('user-avatar').textContent = this.state.p1.charAt(0);
                QuestionEngine.newQuestion();
            }, 300);
        },

        logout: function() {
            if(confirm('Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø© ÙˆØ§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
                sessionStorage.removeItem('love_session');
                window.location.reload();
            }
        },

        toggleTheme: function() {
            const current = document.documentElement.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', next);
            localStorage.setItem('love_theme', next);
        },

        copyText: function() {
            const text = document.getElementById('q-text').textContent;
            navigator.clipboard.writeText(text).then(() => this.showToast('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­ ğŸ“‹'));
        },

        showToast: function(msg) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    };

    /* =================================================================
       3. Ù…Ø­Ø±Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Question Engine)
       ================================================================= */
    const QuestionEngine = {
        currentMode: 'love',

        setMode: function(mode, btn) {
            this.currentMode = mode;
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            this.newQuestion();
        },

        newQuestion: function() {
            // ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„
            const qText = document.getElementById('q-text');
            const qTag = document.getElementById('q-category');
            qText.innerHTML = '<span class="cursor"></span>';
            
            // Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ø°ÙƒÙŠ
            const topicsList = DB.topics[this.currentMode];
            const randomTopic = topicsList[Math.floor(Math.random() * topicsList.length)];
            const randomPattern = DB.patterns[Math.floor(Math.random() * DB.patterns.length)];
            const randomContext = Math.random() > 0.7 ? DB.contexts[Math.floor(Math.random() * DB.contexts.length)] + " " : "";

            // Ø¯Ù…Ø¬ Ø§Ù„Ù†Øµ
            const finalQuestion = randomContext + randomPattern.replace('{topic}', randomTopic);

            // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯
            App.state.qCount++;
            document.getElementById('q-counter').textContent = App.state.qCount;

            // Ø¹Ø±Ø¶ Ø§Ù„Ù†Øµ Ø¨ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒØªØ§Ø¨Ø©
            setTimeout(() => {
                qTag.textContent = randomTopic;
                this.typeWriter(finalQuestion, qText);
            }, 200);
        },

        typeWriter: function(text, el) {
            el.innerHTML = '';
            el.classList.add('cursor');
            let i = 0;
            const speed = 25;
            function type() {
                if (i < text.length) {
                    el.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                } else {
                    el.classList.remove('cursor');
                }
            }
            type();
        }
    };

    /* =================================================================
       4. Ù…Ø´ØºÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ (Audio Player)
       ================================================================= */
    const AudioPlayer = {
        audio: document.getElementById('main-audio'),
        visualizer: document.getElementById('visualizer'),
        btnPlay: document.getElementById('btn-play'),
        btnStop: document.getElementById('btn-stop'),
        dropzone: document.getElementById('drop-zone'),
        fileInput: document.getElementById('audio-input'),
        trackName: document.getElementById('track-name'),

        init: function() {
            // Dropzone Events
            this.dropzone.onclick = () => this.fileInput.click();
            this.fileInput.onchange = (e) => this.handleFile(e.target.files[0]);
            
            this.dropzone.ondragover = (e) => { e.preventDefault(); this.dropzone.style.borderColor = 'var(--accent)'; };
            this.dropzone.ondragleave = () => { this.dropzone.style.borderColor = 'var(--card-border)'; };
            this.dropzone.ondrop = (e) => {
                e.preventDefault();
                this.dropzone.style.borderColor = 'var(--card-border)';
                this.handleFile(e.dataTransfer.files[0]);
            };

            // Controls
            this.btnPlay.onclick = () => this.togglePlay();
            this.btnStop.onclick = () => { this.audio.pause(); this.audio.currentTime = 0; this.updateUI(false); };
            
            this.audio.onended = () => this.updateUI(false);
        },

        handleFile: function(file) {
            if (file && file.type.startsWith('audio/')) {
                const url = URL.createObjectURL(file);
                this.audio.src = url;
                this.trackName.textContent = file.name;
                this.btnPlay.disabled = false;
                this.btnStop.disabled = false;
                this.togglePlay();
                App.showToast('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„ØµÙˆØªÙŠ â™«');
            } else {
                App.showToast('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ØµÙˆØªÙŠ ØµØ­ÙŠØ­');
            }
        },

        togglePlay: function() {
            if (this.audio.paused) {
                this.audio.play();
                this.updateUI(true);
            } else {
                this.audio.pause();
                this.updateUI(false);
            }
        },

        updateUI: function(isPlaying) {
            this.btnPlay.textContent = isPlaying ? 'â¸' : 'â–¶';
            isPlaying ? this.visualizer.classList.add('active') : this.visualizer.classList.remove('active');
        }
    };

    /* =================================================================
       5. Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ (Memories/Goals)
       ================================================================= */
    const Storage = {
        currentType: '',
        modal: document.getElementById('generic-modal'),
        modalBody: document.getElementById('modal-body'),
        modalTitle: document.getElementById('modal-title'),

        openModal: function(type) {
            this.currentType = type;
            this.modal.classList.add('open');
            this.renderContent(type);
        },

        renderContent: function(type) {
            let title = '';
            let count = 5;
            let placeholder = '';
            
            if(type === 'memories') { title = 'ğŸ“” Ø°ÙƒØ±ÙŠØ§ØªÙ†Ø§ Ø§Ù„Ù…ÙØ¶Ù„Ø©'; placeholder = 'Ø§Ø°ÙƒØ± Ù…ÙˆÙ‚Ù Ø¬Ù…ÙŠÙ„...'; }
            if(type === 'goals') { title = 'ğŸ¯ Ø£Ù‡Ø¯Ø§ÙÙ†Ø§ Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©'; placeholder = 'Ù‡Ø¯Ù Ù†Ø³Ø¹Ù‰ Ù„Ù‡...'; count = 8; }
            if(type === 'game') { this.renderGame(); return; }

            this.modalTitle.textContent = title;
            this.modalBody.innerHTML = '';
            
            const savedData = JSON.parse(localStorage.getItem(`love_${type}`) || '[]');

            for(let i=0; i<count; i++) {
                const input = document.createElement('input');
                input.className = 'custom-input';
                input.style.marginBottom = '10px';
                input.placeholder = `${placeholder} (${i+1})`;
                input.value = savedData[i] || '';
                this.modalBody.appendChild(input);
            }
        },

        renderGame: function() {
            this.modalTitle.textContent = 'ğŸ² Ù„Ø¹Ø¨Ø© Ø³Ø±ÙŠØ¹Ø©';
            this.modalBody.innerHTML = `
                <div style="background:rgba(255,255,255,0.05); padding:20px; border-radius:12px; text-align:center; min-height:100px; display:flex; align-items:center; justify-content:center; margin-bottom:20px;">
                    <h3 id="game-text">Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠ</h3>
                </div>
                <button class="btn-primary" onclick="Storage.newChallenge()">ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯</button>
            `;
        },

        newChallenge: function() {
            const challenges = [
                "ØªØ­Ø¯ÙŠ: Ø§Ù…Ø³Ùƒ ÙŠØ¯ Ø´Ø±ÙŠÙƒÙƒ Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø© ÙƒØ§Ù…Ù„Ø© Ø¨ØµÙ…Øª.",
                "Ø³Ø¤Ø§Ù„: Ø´Ù†Ùˆ Ø£ÙƒØ«Ø± ØµÙØ© ØªØ­Ø¨Ù‡Ø§ Ø¨Ø´ÙƒÙ„ÙŠØŸ",
                "ØªØ­Ø¯ÙŠ: Ø§ÙØªØ­ Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆ ÙˆØ±ÙŠÙ†ÙŠ Ø£ÙˆÙ„ ØµÙˆØ±Ø© Ø§Ù„Ù†Ø§.",
                "Ø§Ø¹ØªØ±Ø§Ù: Ù‚Ù„ Ø³Ø± Ø¨Ø³ÙŠØ· Ù…Ø§ Ù‚Ù„ØªÙ‡ Ù…Ù† Ù‚Ø¨Ù„.",
                "ØªØ­Ø¯ÙŠ: ØºØ§Ø²Ù„ Ø´Ø±ÙŠÙƒÙƒ Ø¨Ù„Ù‡Ø¬Ø© ØºØ±ÙŠØ¨Ø©.",
                "Ø³Ø¤Ø§Ù„: Ù„Ùˆ Ø­ÙŠØ§ØªÙ†Ø§ ÙÙŠÙ„Ù…ØŒ Ø´Ù†Ùˆ ÙŠÙƒÙˆÙ† Ø§Ø³Ù…Ù‡ØŸ"
            ];
            const rand = challenges[Math.floor(Math.random() * challenges.length)];
            document.getElementById('game-text').textContent = rand;
        },

        saveAndClose: function() {
            if(this.currentType !== 'game') {
                const inputs = this.modalBody.querySelectorAll('input');
                const values = Array.from(inputs).map(i => i.value);
                localStorage.setItem(`love_${this.currentType}`, JSON.stringify(values));
                App.showToast('ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­ âœ”');
            }
            this.closeModal();
        },

        closeModal: function() {
            this.modal.classList.remove('open');
        }
    };

    // Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ÙŠ
    App.init();
    AudioPlayer.init();

</script>
</body>
</html>
